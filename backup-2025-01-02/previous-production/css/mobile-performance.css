/**
 * Mobile Performance Optimizations
 * Reduces animation complexity and improves performance on mobile devices
 */

/* Disable expensive animations on mobile */
@media (max-width: 768px) {
  /* Force hardware acceleration on animated elements */
  .slot-scroll,
  .slot-cell,
  .slot-item,
  .item-container {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    perspective: 1000px;
    -webkit-perspective: 1000px;
  }

  /* Simplify animations */
  * {
    animation-timing-function: linear !important;
  }

  /* Disable blur effects completely on mobile */
  .high-speed-blur,
  .extreme-blur {
    filter: none !important;
  }

  /* Reduce shadow complexity */
  .slot-item {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  }

  /* Disable complex gradients during animation */
  .spinning .slot-item {
    background: #1a1a1a !important;
    border-image: none !important;
    border-color: #444 !important;
  }

  /* Reduce glow effects */
  .winner-glow {
    animation: winner-glow-mobile 1s ease-in-out !important;
  }

  @keyframes winner-glow-mobile {
    0%,
    100% {
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }
    50% {
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
    }
  }

  /* Disable particle effects on very small screens */
  @media (max-width: 480px) {
    .lock-in-particle {
      display: none !important;
    }
  }

  /* Optimize font rendering during animations */
  .spinning .slot-cell p {
    font-smoothing: antialiased;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeSpeed;
  }

  /* Reduce animation duration for quicker response */
  .slot-cell {
    transition-duration: 0.15s !important;
  }

  /* Use simpler transforms */
  .slot-scroll {
    will-change: transform;
    contain: layout style paint;
  }

  /* === NEW ROULETTE OPTIMIZATIONS === */

  /* Remove backdrop blur on overlay - Phase 1 Quick Win */
  .overlay-backdrop {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    background-color: rgba(0, 0, 0, 0.85) !important;
  }

  /* GPU acceleration for roulette elements - EXCLUDING SVG elements and containers */
  .roulette-wheel,
  .roulette-ball,
  .scroll-container,
  .ball-inner {
    will-change: transform;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* SVG elements should NOT have CSS transforms as they use SVG transforms */
  .wheel-svg,
  .wheel-rotating-group {
    /* Do not set any transform or will-change properties */
  }

  /* Ensure SVG elements can still use their native transform attribute */
  .wheel-rotating-group[transform] {
    /* Allow SVG transform attribute to work - no CSS overrides */
  }

  /* Optimize the wheel container but not the rotating parts */
  .roulette-wheel-wrapper {
    will-change: transform;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Disable blur effects on roulette ball */
  .roulette-ball.high-speed .ball-inner {
    filter: none !important;
  }

  /* Simplify roulette shadows */
  .roulette-wheel {
    box-shadow: none !important;
  }

  .roulette-ball {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5) !important;
  }

  /* Disable complex wheel segment animations */
  .wheel-segment {
    transition: none !important;
  }

  /* Reduce particle effects for roulette */
  .roulette-particle {
    display: none !important;
  }

  /* Simplify light animations */
  .roulette-lights .light {
    animation: none !important;
    opacity: 0.5 !important;
  }

  /* Optimize canvas rendering */
  canvas {
    image-rendering: optimizeSpeed !important;
    image-rendering: -webkit-optimize-contrast !important;
  }

  /* Reduce filter complexity on mobile */
  .roulette-inner.spinning-fast {
    filter: none !important;
  }

  /* Disable gloss and shine effects */
  .segment-inner::after,
  .roulette-wheel::before,
  .roulette-wheel::after {
    display: none !important;
  }
}

/* Ultra-low performance mode for very slow devices */
@media (max-width: 768px) and (max-device-memory: 2gb) {
  /* Disable all non-essential animations */
  *:not(svg):not(.wheel-rotating-group) {
    animation: none !important;
    transition: none !important;
  }

  /* Keep only essential animations */
  .roulette-ball {
    transition: transform 0.1s linear !important;
  }

  /* Ensure SVG transforms still work */
  svg,
  svg * {
    transform: initial !important;
    -webkit-transform: initial !important;
  }
}

/* Low-end device optimizations */
@media (max-width: 768px) and (max-device-memory: 4gb) {
  /* Disable all non-essential animations */
  * {
    animation: none !important;
    transition: none !important;
  }

  /* Keep only essential slot machine animation */
  .slot-scroll {
    transition: none !important;
  }

  /* Disable shadows and glows */
  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* Simplify borders */
  .slot-item {
    border: 1px solid #444 !important;
  }
}

/* Reduce motion for accessibility and performance */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .slot-scroll {
    transition: none !important;
  }
}
