<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Help Us Make This Less Terrible | The Finals Loadout</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
  </head>
  <body>
    <nav class="main-nav">
      <a href="https://thefinalsloadout.com/">Home</a>
      <a href="https://thefinalsloadout.com/ragequit/">Rage Quit Loadout</a>
      <a href="https://thefinalsloadout.com/patch-notes/">Patch Notes</a>
    </nav>

    <header class="headerSection">
      <img src="images/feedback-logo3.webp" alt="Feedback Roulette" class="feedback-logo" />
      <h1 class="feedback-title">Help Us Make This Less Terrible</h1>
      <p class="feedback-subtitle">Your feedback directly shapes The Finals experience</p>
    </header>

    <!-- Feedback Rewards Program -->
    <section class="feedback-incentive">
      <div class="container">
        <h2>ğŸ° THIS MONTH'S FEEDBACK LOTTERY</h2>
        <p>Submit feedback to enter. Winner gets their loadout idea implemented!</p>
        <div class="last-winner">Last winner: xXSniperGodXx - "Throwing Knife Only Mode"</div>
        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress-fill" style="width: 60%"></div>
          </div>
          <span class="progress-text">3 more feedback until reward!</span>
        </div>
      </div>
    </section>

    <!-- Live Feedback Ticker -->
    <section class="social-proof">
      <div class="ticker-container">
        <div class="ticker-content" id="feedback-ticker">
          <!-- Ticker items will be populated by JavaScript -->
        </div>
      </div>
    </section>

    <main class="feedback-container">
      <!-- Feedback Roulette Wheel -->
      <section class="feedback-roulette-section">
        <h2>ğŸ° SPIN TO PICK YOUR FEEDBACK TOPIC</h2>
        <div class="roulette-container">
          <div class="feedback-wheel" id="feedback-wheel">
            <div class="wheel-section" data-category="weapons">
              <span class="wheel-icon">ğŸ”«</span>
              <span class="wheel-text">WEAPONS</span>
            </div>
            <div class="wheel-section" data-category="ui">
              <span class="wheel-icon">ğŸ–¥ï¸</span>
              <span class="wheel-text">UI/UX</span>
            </div>
            <div class="wheel-section" data-category="bugs">
              <span class="wheel-icon">ğŸ›</span>
              <span class="wheel-text">BUGS</span>
            </div>
            <div class="wheel-section" data-category="ideas">
              <span class="wheel-icon">ğŸ’¡</span>
              <span class="wheel-text">IDEAS</span>
            </div>
            <div class="wheel-section" data-category="rage">
              <span class="wheel-icon">ğŸ˜¤</span>
              <span class="wheel-text">RAGE QUIT</span>
            </div>
          </div>
          <button class="spin-button" id="spin-feedback-wheel">SPIN IT!</button>
          <div class="wheel-pointer"></div>
        </div>
        <div class="selected-topic-badge" id="selected-topic-badge" style="display: none;">
          <span class="badge-icon">ğŸ¯</span>
          <span class="badge-text" id="badge-text">Topic Selected!</span>
        </div>
      </section>

      <!-- Quick Topic Buttons -->
      <section class="quick-topics">
        <h3>Or pick your poison directly:</h3>
        <div class="topic-buttons">
          <button class="topic-btn" onclick="setTopic('bug')">ğŸ› Report Bug</button>
          <button class="topic-btn" onclick="setTopic('weapon')">ğŸ”« Weapon Balance</button>
          <button class="topic-btn" onclick="setTopic('feature')">âœ¨ New Feature</button>
          <button class="topic-btn" onclick="setTopic('rage')">ğŸ˜¤ Rage Quit Mode</button>
          <button class="topic-btn" onclick="setTopic('love')">â¤ï¸ Love It</button>
        </div>
      </section>

      <!-- Enhanced Feedback Form -->
      <section class="feedback-form-section">
        <form id="feedback-form" class="enhanced-form">
          <div class="form-group">
            <label for="feedback-type">What's your vibe?</label>
            <select id="feedback-type" name="type" required>
              <option value="">Choose your complaint...</option>
              <option value="bug">ğŸ› I found a game-breaking bug...</option>
              <option value="weapon">ğŸ”« This weapon is OP as hell...</option>
              <option value="feature">ğŸ’¡ I have a dream feature...</option>
              <option value="ui">ğŸ–¥ï¸ UI makes me want to cry...</option>
              <option value="rage">ğŸ˜¤ Matchmaking is pure pain...</option>
              <option value="love">â¤ï¸ Actually, I love something...</option>
            </select>
          </div>

          <div class="form-group">
            <label for="feedback-text" id="feedback-label">What's broken?</label>
            <textarea 
              id="feedback-text" 
              name="feedback" 
              placeholder="Spill your guts here..." 
              required
            ></textarea>
          </div>

          <div class="form-group">
            <label for="rating">Rate your experience (weapon icons = better)</label>
            <div class="weapon-rating" id="weapon-rating">
              <span class="weapon-star" data-rating="1">ğŸ”«</span>
              <span class="weapon-star" data-rating="2">ğŸ”«</span>
              <span class="weapon-star" data-rating="3">ğŸ”«</span>
              <span class="weapon-star" data-rating="4">ğŸ”«</span>
              <span class="weapon-star" data-rating="5">ğŸ”«</span>
            </div>
            <input type="hidden" id="rating" name="rating" value="0">
          </div>

          <div class="form-group">
            <label for="email">Email (optional - for follow-up)</label>
            <input type="email" id="email" name="email" placeholder="yourname@example.com">
            <div class="email-incentive">ğŸ’ Drop your email for a chance at exclusive Season 7 beta access</div>
          </div>

          <button type="submit" class="send-button" id="send-button">
            <span class="button-text">SEND IT</span>
            <span class="button-particles"></span>
          </button>
        </form>

        <div id="feedback-response" class="success-message" style="display: none;">
          <div class="jackpot-animation">
            <h2>ğŸ° JACKPOT! ğŸ°</h2>
            <p>FEEDBACK RECEIVED! You're now entered in the lottery</p>
            <div class="lottery-ticket">Your ticket: #<span id="lottery-number">0247</span></div>
            <div class="falling-coins"></div>
            <div class="redirect-timer">Redirecting in <span id="countdown">3</span> seconds...</div>
          </div>
        </div>
      </section>
    </main>

    <script>
      // Enhanced feedback system with session tracking
      let feedbackCount = parseInt(localStorage.getItem('feedbackCount') || '0');
      let isSpinning = false;
      
      // Enhanced ticker with more variety
      const feedbackExamples = [
        { user: "xXSniperXx", feedback: "Found a bug with Medium class loadouts", icon: "ğŸ›" },
        { user: "RageQuitPro", feedback: "Sledgehammer is completely broken lol", icon: "ğŸ”¨" },
        { user: "TacticalGamer", feedback: "Can we get a 'no explosives' mode?", icon: "ğŸ’¡" },
        { user: "AnimationFan", feedback: "The new roulette animation is sick!", icon: "â¤ï¸" },
        { user: "PunishmentSeeker", feedback: "Rage quit mode needs MORE punishment", icon: "ğŸ˜¤" },
        { user: "BalanceGuru", feedback: "AKM needs a serious nerf", icon: "ğŸ”«" },
        { user: "UIExpert", feedback: "Mobile navigation could be cleaner", icon: "ğŸ“±" },
        { user: "FeatureRequest", feedback: "Add loadout favorites system please", icon: "â­" },
        { user: "BugHunter", feedback: "Spinner gets stuck on Firefox sometimes", icon: "ğŸ›" },
        { user: "SoundDesigner", feedback: "Love the new audio effects!", icon: "ğŸ”Š" }
      ];

      // Initialize ticker with randomized times
      function initializeTicker() {
        const ticker = document.getElementById('feedback-ticker');
        const shuffled = [...feedbackExamples].sort(() => Math.random() - 0.5);
        
        ticker.innerHTML = shuffled.map(item => {
          const timeAgo = Math.floor(Math.random() * 6) + 2; // 2-8 hours ago
          return `<span class="ticker-item">
            <span class="ticker-icon">${item.icon}</span>
            <strong>${item.user}:</strong> "${item.feedback}" (${timeAgo}h ago)
          </span>`;
        }).join('');
      }

      // Enhanced wheel with hover and sound effects
      const wheelElement = document.getElementById('feedback-wheel');
      
      // Add hover effect to wheel
      wheelElement.addEventListener('mouseenter', function() {
        if (!isSpinning) {
          this.style.transform = 'rotate(5deg) scale(1.02)';
          this.style.boxShadow = '0 0 40px rgba(255, 183, 0, 1)';
        }
      });
      
      wheelElement.addEventListener('mouseleave', function() {
        if (!isSpinning) {
          this.style.transform = 'rotate(0deg) scale(1)';
          this.style.boxShadow = '0 0 30px rgba(255, 183, 0, 0.8)';
        }
      });

      // Enhanced spinning logic with sound
      document.getElementById('spin-feedback-wheel').addEventListener('click', function() {
        if (isSpinning) return;
        
        isSpinning = true;
        const wheel = document.getElementById('feedback-wheel');
        const categories = ['weapons', 'ui', 'bugs', 'ideas', 'rage'];
        const selectedCategory = categories[Math.floor(Math.random() * categories.length)];
        
        // Play tick sound (simulated)
        playTickSound();
        
        // Enhanced spin animation
        const spins = 3 + Math.random() * 2; // 3-5 full rotations
        wheel.style.transition = 'transform 3s cubic-bezier(0.23, 1, 0.32, 1)';
        wheel.style.transform = `rotate(${360 * spins}deg)`;
        
        setTimeout(() => {
          setTopic(selectedCategory);
          showSelectedBadge(selectedCategory);
          isSpinning = false;
          wheel.style.transition = 'transform 0.5s ease';
          wheel.style.transform = 'rotate(0deg)';
        }, 3000);
      });

      // Show selected topic badge
      function showSelectedBadge(category) {
        const badge = document.getElementById('selected-topic-badge');
        const badgeText = document.getElementById('badge-text');
        const categoryMap = {
          'weapons': 'ğŸ”« WEAPONS SELECTED',
          'ui': 'ğŸ–¥ï¸ UI/UX SELECTED', 
          'bugs': 'ğŸ› BUGS SELECTED',
          'ideas': 'ğŸ’¡ IDEAS SELECTED',
          'rage': 'ğŸ˜¤ RAGE QUIT SELECTED'
        };
        
        badgeText.textContent = categoryMap[category] || 'TOPIC SELECTED';
        badge.style.display = 'block';
        badge.style.animation = 'badgePop 0.5s ease-out';
        
        setTimeout(() => {
          badge.style.animation = 'badgeFade 0.5s ease-out';
          setTimeout(() => badge.style.display = 'none', 500);
        }, 3000);
      }

      // Enhanced topic setting with glow effects
      function setTopic(category) {
        const typeSelect = document.getElementById('feedback-type');
        const label = document.getElementById('feedback-label');
        const textarea = document.getElementById('feedback-text');
        
        const prompts = {
          'bug': {
            label: "What's broken?",
            placeholder: "Describe the bug: What happened? What did you expect? Steps to reproduce?",
            value: "bug"
          },
          'weapons': {
            label: "Which weapon made you rage?",
            placeholder: "Tell us about weapon balance issues, overpowered weapons, or underpowered ones...",
            value: "weapon"
          },
          'ideas': {
            label: "What's your dream feature?",
            placeholder: "Describe your idea: What would make this site amazing? New features, improvements?",
            value: "feature"
          },
          'ui': {
            label: "What confused you?",
            placeholder: "UI/UX feedback: What was confusing? Hard to find? Could be improved?",
            value: "ui"
          },
          'rage': {
            label: "What made you rage?",
            placeholder: "Let it all out. What frustrated you about the site or the game?",
            value: "rage"
          },
          'love': {
            label: "What do you love?",
            placeholder: "Tell us what's working great! What features do you love?",
            value: "love"
          }
        };
        
        if (prompts[category]) {
          label.textContent = prompts[category].label;
          textarea.placeholder = prompts[category].placeholder;
          typeSelect.value = prompts[category].value;
          
          // Add glow effect to form
          const form = document.querySelector('.enhanced-form');
          form.style.boxShadow = '0 0 30px rgba(255, 183, 0, 0.4)';
          setTimeout(() => {
            form.style.boxShadow = '0 15px 35px rgba(0, 0, 0, 0.5)';
          }, 2000);
        }
      }

      // Weapon rating system
      document.querySelectorAll('.weapon-star').forEach(star => {
        star.addEventListener('click', function() {
          const rating = this.dataset.rating;
          document.getElementById('rating').value = rating;
          
          document.querySelectorAll('.weapon-star').forEach((s, index) => {
            if (index < rating) {
              s.style.filter = 'sepia(1) hue-rotate(45deg) brightness(1.2)';
              s.style.transform = 'scale(1.2)';
            } else {
              s.style.filter = 'grayscale(1)';
              s.style.transform = 'scale(1)';
            }
          });
        });
      });

      // Enhanced form submission with session tracking
      document.getElementById('feedback-form').addEventListener('submit', function(event) {
        event.preventDefault();
        
        feedbackCount++;
        localStorage.setItem('feedbackCount', feedbackCount.toString());
        
        const sendButton = document.getElementById('send-button');
        sendButton.classList.add('sending');
        sendButton.querySelector('.button-text').textContent = 'SENDING...';
        
        // Simulate API call
        setTimeout(() => {
          showSuccessState();
          
          // Check for feedback frenzy mode
          if (feedbackCount >= 5) {
            triggerFeedbackFrenzy();
          }
        }, 2000);
      });

      // Enhanced success state with redirect
      function showSuccessState() {
        const form = document.getElementById('feedback-form');
        const response = document.getElementById('feedback-response');
        
        // Generate random lottery number
        const lotteryNumber = Math.floor(Math.random() * 9999).toString().padStart(4, '0');
        document.getElementById('lottery-number').textContent = lotteryNumber;
        
        form.style.display = 'none';
        response.style.display = 'block';
        
        // Trigger jackpot animation
        createJackpotEffect();
        
        // Start countdown timer
        let countdown = 3;
        const countdownElement = document.getElementById('countdown');
        const timer = setInterval(() => {
          countdown--;
          countdownElement.textContent = countdown;
          if (countdown <= 0) {
            clearInterval(timer);
            window.location.href = '../index.html';
          }
        }, 1000);
      }

      // Feedback Frenzy Mode - Easter Egg
      function triggerFeedbackFrenzy() {
        // Create confetti effect
        for (let i = 0; i < 50; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.backgroundColor = ['#ff4444', '#ffb700', '#4444ff', '#44ff44'][Math.floor(Math.random() * 4)];
          confetti.style.animationDelay = Math.random() * 3 + 's';
          document.body.appendChild(confetti);
          
          setTimeout(() => confetti.remove(), 5000);
        }
        
        // Show special badge
        const badge = document.createElement('div');
        badge.className = 'frenzy-badge';
        badge.innerHTML = 'ğŸ† FEEDBACK FRENZY UNLOCKED! ğŸ†';
        document.body.appendChild(badge);
        
        setTimeout(() => badge.remove(), 5000);
      }

      // Enhanced jackpot animation
      function createJackpotEffect() {
        const container = document.querySelector('.falling-coins');
        for (let i = 0; i < 30; i++) {
          const coin = document.createElement('div');
          coin.className = 'coin';
          coin.textContent = ['ğŸ’°', 'ğŸ°', 'ğŸ’', 'ğŸ†'][Math.floor(Math.random() * 4)];
          coin.style.left = Math.random() * 100 + '%';
          coin.style.animationDelay = Math.random() * 2 + 's';
          container.appendChild(coin);
          
          setTimeout(() => coin.remove(), 4000);
        }
      }

      // Simulated sound effect
      function playTickSound() {
        // Create a simple tick sound using Web Audio API
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
          gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
          
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.1);
        } catch (e) {
          // Fallback for browsers without Web Audio API
          console.log('Tick sound played');
        }
      }

      // Form focus glow effect
      const form = document.querySelector('.enhanced-form');
      form.addEventListener('focusin', function() {
        this.style.boxShadow = '0 0 30px rgba(255, 183, 0, 0.4)';
      });
      
      form.addEventListener('focusout', function() {
        this.style.boxShadow = '0 15px 35px rgba(0, 0, 0, 0.5)';
      });
      
      // Initialize everything on load
      window.addEventListener('load', function() {
        initializeTicker();
      });
    </script>
  </body>
</html>
