<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE FINALS Season 9: Dragon Rising - Patch Notes | The Finals Loadout</title>
    <meta name="description" content="Season 9 Dragon Rising meta changes, weapon balancing, and gameplay updates for THE FINALS. Quick reference for competitive players.">

    <!-- React from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-bg: #0a0e17;
            --color-bg-secondary: #131926;
            --color-bg-tertiary: #1a2332;
            --color-accent: #ff4655;
            --color-accent-dim: #ff465520;
            --color-text: #e4e7eb;
            --color-text-muted: #94a3b8;
            --color-border: #2d3748;

            --color-buff: #22c55e;
            --color-buff-bg: #22c55e20;
            --color-nerf: #ef4444;
            --color-nerf-bg: #ef444420;
            --color-rework: #f59e0b;
            --color-rework-bg: #f59e0b20;
            --color-new: #3b82f6;
            --color-new-bg: #3b82f620;
            --color-rule: #8b5cf6;
            --color-rule-bg: #8b5cf620;
            --color-fix: #64748b;
            --color-fix-bg: #64748b20;

            --impact-high: #ef4444;
            --impact-medium: #f59e0b;
            --impact-low: #6b7280;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.6;
            padding-bottom: 100px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .site-header {
            background: var(--color-bg-secondary);
            border-bottom: 2px solid var(--color-accent);
            padding: 20px 0;
            margin-bottom: 30px;
        }

        .site-header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .site-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-accent);
        }

        .version-selector {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .current-version {
            text-align: right;
        }

        .version-label {
            font-size: 12px;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .version-number {
            font-size: 18px;
            font-weight: 700;
            color: var(--color-text);
        }

        .status-badge {
            background: var(--color-new);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        /* Meta TLDR Card */
        .meta-tldr-card {
            background: linear-gradient(135deg, var(--color-accent) 0%, #c41e2e 100%);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 40px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .meta-tldr-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .tldr-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .season-badge {
            background: rgba(0,0,0,0.3);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .tldr-title {
            font-size: 28px;
            font-weight: 800;
            color: white;
            flex: 1;
        }

        .tldr-content {
            margin-bottom: 24px;
        }

        .impact-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 14px;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            color: white;
            font-size: 15px;
            line-height: 1.5;
        }

        .impact-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .tldr-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-primary {
            background: white;
            color: var(--color-accent);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: rgba(0,0,0,0.3);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .btn-secondary:hover {
            background: rgba(0,0,0,0.4);
            border-color: rgba(255,255,255,0.5);
        }

        /* Filter Bar */
        .filter-bar {
            background: var(--color-bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .filter-label {
            font-size: 13px;
            color: var(--color-text-muted);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-toggle {
            padding: 8px 16px;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            color: var(--color-text-muted);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            font-weight: 500;
        }

        .filter-toggle:hover {
            background: var(--color-bg);
            color: var(--color-text);
        }

        .filter-toggle.active {
            background: var(--color-accent);
            color: white;
            border-color: var(--color-accent);
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 10px 16px;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            color: var(--color-text);
            font-size: 14px;
        }

        .search-input::placeholder {
            color: var(--color-text-muted);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--color-accent);
        }

        /* Change Card */
        .change-card {
            background: var(--color-bg-secondary);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 16px;
            border-left: 4px solid var(--color-border);
            transition: all 0.2s;
        }

        .change-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .change-card.impact-high {
            border-left-color: var(--impact-high);
        }

        .change-card.impact-medium {
            border-left-color: var(--impact-medium);
        }

        .change-card.impact-low {
            border-left-color: var(--impact-low);
        }

        .change-card.highlight-flash {
            animation: highlight 2s ease-out;
        }

        @keyframes highlight {
            0%, 100% { background: var(--color-bg-secondary); }
            50% { background: var(--color-accent-dim); }
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .tag-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tag-buff { background: var(--color-buff-bg); color: var(--color-buff); }
        .tag-nerf { background: var(--color-nerf-bg); color: var(--color-nerf); }
        .tag-rework { background: var(--color-rework-bg); color: var(--color-rework); }
        .tag-new { background: var(--color-new-bg); color: var(--color-new); }
        .tag-rule { background: var(--color-rule-bg); color: var(--color-rule); }
        .tag-fix { background: var(--color-fix-bg); color: var(--color-fix); }

        .copy-link-btn {
            padding: 6px 12px;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            color: var(--color-text-muted);
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .copy-link-btn:hover {
            background: var(--color-bg);
            color: var(--color-text);
        }

        .change-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 12px;
        }

        .value-change {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: 600;
            flex-wrap: wrap;
        }

        .value-before {
            color: var(--color-text-muted);
            text-decoration: line-through;
        }

        .value-arrow {
            color: var(--color-accent);
            font-weight: 700;
        }

        .value-after {
            color: var(--color-accent);
        }

        .change-details {
            color: var(--color-text-muted);
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .developer-note {
            background: var(--color-bg-tertiary);
            border-left: 3px solid var(--color-accent);
            padding: 12px 16px;
            border-radius: 6px;
            color: var(--color-text-muted);
            font-size: 14px;
            font-style: italic;
        }

        /* Collapsible Section */
        .collapsible-section {
            margin-bottom: 24px;
        }

        .section-header {
            background: var(--color-bg-secondary);
            padding: 20px 24px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: all 0.2s;
            user-select: none;
        }

        .section-header:hover {
            background: var(--color-bg-tertiary);
        }

        .section-icon {
            font-size: 24px;
        }

        .section-info {
            flex: 1;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--color-text);
        }

        .section-subtitle {
            font-size: 14px;
            color: var(--color-text-muted);
            margin-top: 4px;
        }

        .section-meta {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .change-count {
            font-size: 14px;
            color: var(--color-text-muted);
            font-weight: 500;
        }

        .impact-dots {
            display: flex;
            gap: 6px;
        }

        .impact-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .impact-dot.high { background: var(--impact-high); }
        .impact-dot.medium { background: var(--impact-medium); }
        .impact-dot.low { background: var(--impact-low); }

        .section-chevron {
            color: var(--color-text-muted);
            transition: transform 0.3s;
        }

        .section-header.expanded .section-chevron {
            transform: rotate(180deg);
        }

        .section-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .section-content.expanded {
            max-height: 10000px;
            padding-top: 16px;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-accent);
            border-radius: 8px;
            padding: 16px 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .tldr-title {
                font-size: 22px;
            }

            .filter-bar {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-group {
                flex-wrap: wrap;
            }

            .search-input {
                min-width: 100%;
            }

            .section-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ===== DATA =====
        const PATCH_DATA = {
            version: "9.0.0",
            season: 9,
            name: "Dragon Rising",
            releaseDate: "December 12, 2024",
            metaTLDR: [
                {
                    text: "Winch Claw meta nerfed: Dome + Mesh Shield block Winch, shorter stun windows",
                    impact: "high",
                    icon: "ðŸŽ¯"
                },
                {
                    text: "Goo gets real counters: 2.25x explosive damage, RPG +10 damage, faster Thermal Bore",
                    impact: "high",
                    icon: "ðŸ§±"
                },
                {
                    text: "Rotations slowed: Gateway range 70m â†’ 50m",
                    impact: "high",
                    icon: "ðŸŒ€"
                },
                {
                    text: "Double Jeopardy: Fail a double cashbox = lose 50% cash",
                    impact: "high",
                    icon: "ðŸ’°"
                },
                {
                    text: "93R nerfed (26â†’24 dmg), Model 1887 faster reload, V9S range buff",
                    impact: "medium",
                    icon: "ðŸ”«"
                }
            ],
            changes: [
                // Rules & Ranked
                {
                    id: "double-jeopardy",
                    title: "Double Jeopardy (New Cashout Rule)",
                    type: "New",
                    category: "System",
                    class: "All",
                    impact: "High",
                    details: "Teams can insert a second cashbox into an active station. If they don't control it when it completes, they lose 50% of their current cash.",
                    reasoning: "Adds high-risk, high-reward decision-making to Cashout endgames."
                },
                {
                    id: "ranked-overtime",
                    title: "Ranked Overtime Cashboxes",
                    type: "Rule",
                    category: "System",
                    class: "All",
                    impact: "High",
                    details: "Cashboxes no longer despawn during overtime in Ranked tournaments.",
                    reasoning: "Prevents unsatisfying sudden endings and ensures decisive final fights."
                },
                {
                    id: "ranked-scoring",
                    title: "Ranked Score Tuning",
                    type: "Rework",
                    category: "System",
                    class: "All",
                    impact: "Medium",
                    details: "Reduced extreme RS losses, especially for high-seeded players eliminated early.",
                    reasoning: "Makes ranking system feel fairer and less punishing for unlucky early exits."
                },
                {
                    id: "sponsor-swap",
                    title: "Sponsor Flexibility",
                    type: "New",
                    category: "System",
                    class: "All",
                    impact: "Low",
                    details: "Players can now swap sponsors freely at any time; no more seasonal locks.",
                    reasoning: "Quality of life improvement for loadout experimentation."
                },

                // Meta Drivers
                {
                    id: "winch-claw-stun",
                    title: "Winch Claw",
                    type: "Nerf",
                    category: "Specialization",
                    class: "Heavy",
                    impact: "High",
                    details: "Maximum stun reduced from 0.65s to 0.5s. Minimum stun reduced from 0.35s to 0.2s. Now breaks if target moves too far from collision point.",
                    values: [
                        { stat: "Max Stun", before: "0.65s", after: "0.5s" },
                        { stat: "Min Stun", before: "0.35s", after: "0.2s" }
                    ],
                    reasoning: "Winch was too oppressive with limited counterplay. These changes add defensive options and skill expression."
                },
                {
                    id: "dome-shield-winch",
                    title: "Dome Shield",
                    type: "Buff",
                    category: "Gadget",
                    class: "Heavy",
                    impact: "High",
                    details: "Dome Shield now blocks Winch Claw pulls.",
                    reasoning: "Provides a reliable defensive tool against Winch Claw dominance."
                },
                {
                    id: "mesh-shield-winch",
                    title: "Mesh Shield",
                    type: "Buff",
                    category: "Specialization",
                    class: "Heavy",
                    impact: "High",
                    details: "Health increased from 750 to 850. Now blocks Winch Claw pulls.",
                    values: [
                        { stat: "Health", before: "750", after: "850" }
                    ],
                    reasoning: "Reinforces anti-Winch counterplay and improves shield durability."
                },
                {
                    id: "gateway-range",
                    title: "Gateway",
                    type: "Nerf",
                    category: "Gadget",
                    class: "Light",
                    impact: "High",
                    details: "Maximum range reduced from 70m to 50m.",
                    values: [
                        { stat: "Max Range", before: "70m", after: "50m" }
                    ],
                    reasoning: "Slows down rotations and makes positional play more meaningful."
                },
                {
                    id: "goo-explosive",
                    title: "Goo Vulnerability",
                    type: "Nerf",
                    category: "Gadget",
                    class: "All",
                    impact: "High",
                    details: "Explosive damage multiplier vs Goo increased from 2.0 to 2.25.",
                    values: [
                        { stat: "Explosive Multiplier", before: "2.0x", after: "2.25x" }
                    ],
                    reasoning: "Makes Goo setups more vulnerable to explosive counterplay."
                },
                {
                    id: "thermal-bore",
                    title: "Thermal Bore",
                    type: "Buff",
                    category: "Gadget",
                    class: "Light",
                    impact: "High",
                    details: "Fuse time reduced from 2.5s to 1.75s. Cooldown reduced from 45s to 35s. Less lingering smoke.",
                    values: [
                        { stat: "Fuse Time", before: "2.5s", after: "1.75s" },
                        { stat: "Cooldown", before: "45s", after: "35s" }
                    ],
                    reasoning: "Primary Goo counter tool is now faster and more reliable."
                },
                {
                    id: "rpg-damage",
                    title: "RPG-7",
                    type: "Buff",
                    category: "Weapon",
                    class: "Heavy",
                    impact: "High",
                    details: "Damage increased from 100 to 110.",
                    values: [
                        { stat: "Damage", before: "100", after: "110" }
                    ],
                    reasoning: "Improves Goo-clearing efficiency and general explosive viability."
                },

                // Weapons - Light
                {
                    id: "93r-nerf",
                    title: "93R",
                    type: "Nerf",
                    category: "Weapon",
                    class: "Light",
                    impact: "High",
                    details: "Damage reduced from 26 to 24. Falloff start reduced from 32m to 30m. Falloff end reduced from 40m to 37.5m. Max range multiplier increased from 40% to 50%.",
                    values: [
                        { stat: "Damage", before: "26", after: "24" },
                        { stat: "Falloff Start", before: "32m", after: "30m" },
                        { stat: "Falloff End", before: "40m", after: "37.5m" },
                        { stat: "Max Range Mult", before: "40%", after: "50%" }
                    ],
                    reasoning: "93R was overperforming at all ranges. Slight compensation at max range."
                },
                {
                    id: "v9s-range",
                    title: "V9S",
                    type: "Buff",
                    category: "Weapon",
                    class: "Light",
                    impact: "Medium",
                    details: "Falloff start extended from 10m to 15m. Falloff end extended from 15m to 25m.",
                    values: [
                        { stat: "Falloff Start", before: "10m", after: "15m" },
                        { stat: "Falloff End", before: "15m", after: "25m" }
                    ],
                    reasoning: "Improves viability at medium range without affecting close-quarters balance."
                },
                {
                    id: "dual-blades",
                    title: "Dual Blades",
                    type: "Buff",
                    category: "Weapon",
                    class: "Medium",
                    impact: "Medium",
                    details: "Third hit damage increased from 65 to 100.",
                    values: [
                        { stat: "3rd Hit Damage", before: "65", after: "100" }
                    ],
                    reasoning: "Rewards completing the full combo sequence."
                },

                // Weapons - Heavy
                {
                    id: "lewis-gun",
                    title: "Lewis Gun",
                    type: "Buff",
                    category: "Weapon",
                    class: "Heavy",
                    impact: "Medium",
                    details: "Damage increased from 22 to 23.",
                    values: [
                        { stat: "Damage", before: "22", after: "23" }
                    ],
                    reasoning: "Slight TTK improvement to compete with other Heavy options."
                },
                {
                    id: "m60-recoil",
                    title: "M60",
                    type: "Rework",
                    category: "Weapon",
                    class: "Heavy",
                    impact: "Medium",
                    details: "Easier recoil for first 8 bullets, harder after 30 bullets.",
                    reasoning: "Rewards burst control, punishes spray-and-pray."
                },
                {
                    id: "model-1887-reload",
                    title: "Model 1887",
                    type: "Buff",
                    category: "Weapon",
                    class: "Medium",
                    impact: "Medium",
                    details: "Tactical reload intro time reduced from 2.2s to 1.5s.",
                    values: [
                        { stat: "Tactical Reload", before: "2.2s", after: "1.5s" }
                    ],
                    reasoning: "Reduces downtime in fights, improves flow."
                },
                {
                    id: "ks23-ads",
                    title: "KS-23",
                    type: "Buff",
                    category: "Weapon",
                    class: "Heavy",
                    impact: "Medium",
                    details: "ADS dispersion reduced by approximately 30%.",
                    reasoning: "Makes ADS more effective at medium shotgun range."
                },
                {
                    id: "bfr-titan",
                    title: "BFR Titan",
                    type: "Nerf",
                    category: "Weapon",
                    class: "Heavy",
                    impact: "Medium",
                    details: "Environmental damage reduced from 130 to 95. Rate of fire reduced from 85 RPM to 82 RPM.",
                    values: [
                        { stat: "Environmental Damage", before: "130", after: "95" },
                        { stat: "Rate of Fire", before: "85 RPM", after: "82 RPM" }
                    ],
                    reasoning: "Reduces environmental destruction power without killing player damage."
                },

                // Gadgets
                {
                    id: "glitch-grenade",
                    title: "Glitch Grenade",
                    type: "Rework",
                    category: "Gadget",
                    class: "Light",
                    impact: "Medium",
                    details: "Ammo reduced from 2 to 1. Cooldown reduced from 20s to 12s.",
                    values: [
                        { stat: "Ammo", before: "2", after: "1" },
                        { stat: "Cooldown", before: "20s", after: "12s" }
                    ],
                    reasoning: "Shifts from burst usage to sustained tempo tool."
                },
                {
                    id: "breach-charge",
                    title: "Breach Charge",
                    type: "Buff",
                    category: "Gadget",
                    class: "Light",
                    impact: "Low",
                    details: "Cooldown reduced from 30s to 20s.",
                    values: [
                        { stat: "Cooldown", before: "30s", after: "20s" }
                    ],
                    reasoning: "More frequent access to breaching opportunities."
                },
                {
                    id: "frag-grenade",
                    title: "Frag Grenade",
                    type: "Buff",
                    category: "Gadget",
                    class: "All",
                    impact: "Low",
                    details: "Outer damage radius increased from 5m to 5.5m. Max damage radius increased from 2.5m to 2.75m.",
                    values: [
                        { stat: "Outer Radius", before: "5m", after: "5.5m" },
                        { stat: "Max Damage Radius", before: "2.5m", after: "2.75m" }
                    ],
                    reasoning: "Slightly more forgiving for chip damage and improved consistency."
                },
                {
                    id: "gas-grenade",
                    title: "Gas Grenade",
                    type: "Buff",
                    category: "Gadget",
                    class: "All",
                    impact: "Low",
                    details: "Cooldown reduced from 30s to 24s.",
                    values: [
                        { stat: "Cooldown", before: "30s", after: "24s" }
                    ],
                    reasoning: "More frequent area denial and vision control."
                },
                {
                    id: "pyro-grenade",
                    title: "Pyro Grenade",
                    type: "Buff",
                    category: "Gadget",
                    class: "All",
                    impact: "Low",
                    details: "Cooldown reduced from 30s to 24s.",
                    values: [
                        { stat: "Cooldown", before: "30s", after: "24s" }
                    ],
                    reasoning: "Increases area denial frequency."
                },
                {
                    id: "pyro-mine",
                    title: "Pyro Mine",
                    type: "Nerf",
                    category: "Gadget",
                    class: "Heavy",
                    impact: "Medium",
                    details: "Explosive damage reduced from 80 to 55.",
                    values: [
                        { stat: "Explosive Damage", before: "80", after: "55" }
                    ],
                    reasoning: "Reduces burst damage potential while maintaining area denial capabilities."
                },

                // New Content
                {
                    id: "fangwai-city",
                    title: "Fangwai City (New Map)",
                    type: "New",
                    category: "Mode",
                    class: "All",
                    impact: "High",
                    details: "Chinese-inspired megacity with elevated walkways, dense apartment blocks, and riverfront views. Features smooth destruction mechanics. Added to Cashout, Ranked, Quick Cash, Head 2 Head, and Team Deathmatch.",
                    reasoning: "Adds vertical gameplay and dense urban combat arenas."
                },
                {
                    id: "point-break",
                    title: "Point Break (New Mode)",
                    type: "New",
                    category: "Mode",
                    class: "All",
                    impact: "High",
                    details: "8v8 attackers vs defenders. Attackers destroy 9 Grand Vaults, defenders drain attacker respawn tokens. Not available on PS4.",
                    reasoning: "Objective-focused large-scale combat."
                },
                {
                    id: "world-tour-2",
                    title: "World Tour 2.0",
                    type: "Rework",
                    category: "System",
                    class: "All",
                    impact: "Medium",
                    details: "Now tracks progress across all game modes universally. Rewards include Stickers, Charms, Multibucks, and Emerald currencies.",
                    reasoning: "More flexible progression system that doesn't lock players into one mode."
                },
                {
                    id: "reward-coins",
                    title: "Reward Coins",
                    type: "New",
                    category: "System",
                    class: "All",
                    impact: "Low",
                    details: "Choose weapon skins based on ranked/World Tour progress (Gold, Platinum, Diamond, Ruby, Emerald tiers).",
                    reasoning: "Player choice in cosmetic rewards."
                },
                {
                    id: "kyoto-powershift",
                    title: "Kyoto Temporarily Removed",
                    type: "Fix",
                    category: "Mode",
                    class: "All",
                    impact: "Low",
                    details: "Kyoto map temporarily removed from Powershift rotation. Returns in patch 9.4.",
                    reasoning: "Performance optimization work in progress."
                }
            ]
        };

        // ===== COMPONENTS =====

        function Toast({ message, onClose }) {
            useEffect(() => {
                const timer = setTimeout(onClose, 3000);
                return () => clearTimeout(timer);
            }, [onClose]);

            return (
                <div className="toast">
                    {message}
                </div>
            );
        }

        function MetaTLDRCard({ data }) {
            const [toast, setToast] = useState(null);

            const copyDiscordTLDR = () => {
                const tldr = `**THE FINALS Season ${data.season}: ${data.name} - Meta TLDR**

${data.metaTLDR.map(item => `${item.icon} ${item.text}`).join('\n')}

Full notes: ${window.location.href}`;

                navigator.clipboard.writeText(tldr);
                setToast('âœ… Copied to clipboard! Ready to paste in Discord');
            };

            const scrollToChanges = (e) => {
                e.preventDefault();
                document.getElementById('full-changes').scrollIntoView({ behavior: 'smooth' });
            };

            return (
                <>
                    <div className="meta-tldr-card">
                        <div className="tldr-header">
                            <span className="season-badge">Season {data.season}</span>
                            <h1 className="tldr-title">{data.name} Meta TLDR</h1>
                        </div>

                        <div className="tldr-content">
                            {data.metaTLDR.map((item, idx) => (
                                <div key={idx} className="impact-item">
                                    <span className="impact-icon">{item.icon}</span>
                                    <span>{item.text}</span>
                                </div>
                            ))}
                        </div>

                        <div className="tldr-actions">
                            <button className="btn btn-primary" onClick={copyDiscordTLDR}>
                                ðŸ“‹ Copy Discord TLDR
                            </button>
                            <a href="#full-changes" className="btn btn-secondary" onClick={scrollToChanges}>
                                View Full Changes â†“
                            </a>
                        </div>
                    </div>

                    {toast && <Toast message={toast} onClose={() => setToast(null)} />}
                </>
            );
        }

        function ChangeCard({ change }) {
            const [toast, setToast] = useState(null);

            const copyLink = () => {
                const url = `${window.location.origin}${window.location.pathname}#change-${change.id}`;
                navigator.clipboard.writeText(url);
                setToast('ðŸ”— Link copied to clipboard!');
            };

            return (
                <>
                    <div
                        id={`change-${change.id}`}
                        className={`change-card impact-${change.impact.toLowerCase()}`}
                    >
                        <div className="card-header">
                            <div className="tag-group">
                                <span className={`tag tag-${change.type.toLowerCase()}`}>{change.type}</span>
                                <span className="tag">{change.category}</span>
                                <span className="tag">{change.class}</span>
                                <span className={`tag impact-${change.impact.toLowerCase()}`}>{change.impact}</span>
                            </div>
                            {change.impact === 'High' && (
                                <button className="copy-link-btn" onClick={copyLink}>
                                    ðŸ”— Copy Link
                                </button>
                            )}
                        </div>

                        <h3 className="change-title">{change.title}</h3>

                        {change.values && (
                            <div style={{ marginBottom: '12px' }}>
                                {change.values.map((val, idx) => (
                                    <div key={idx} className="value-change">
                                        <span style={{ color: 'var(--color-text-muted)', fontSize: '14px' }}>
                                            {val.stat}:
                                        </span>
                                        <span className="value-before">{val.before}</span>
                                        <span className="value-arrow">â†’</span>
                                        <span className="value-after">{val.after}</span>
                                    </div>
                                ))}
                            </div>
                        )}

                        <p className="change-details">{change.details}</p>

                        {change.reasoning && (
                            <div className="developer-note">
                                ðŸ’¬ {change.reasoning}
                            </div>
                        )}
                    </div>

                    {toast && <Toast message={toast} onClose={() => setToast(null)} />}
                </>
            );
        }

        function FilterBar({ filters, onFilterChange }) {
            return (
                <div className="filter-bar">
                    <div className="filter-group">
                        <span className="filter-label">Impact</span>
                        {['High', 'Medium', 'Low'].map(impact => (
                            <button
                                key={impact}
                                className={`filter-toggle ${filters.impact.includes(impact) ? 'active' : ''}`}
                                onClick={() => onFilterChange('impact', impact)}
                            >
                                {impact}
                            </button>
                        ))}
                    </div>

                    <div className="filter-group">
                        <span className="filter-label">Class</span>
                        {['All', 'Light', 'Medium', 'Heavy'].map(cls => (
                            <button
                                key={cls}
                                className={`filter-toggle ${filters.class.includes(cls) ? 'active' : ''}`}
                                onClick={() => onFilterChange('class', cls)}
                            >
                                {cls}
                            </button>
                        ))}
                    </div>

                    <input
                        type="text"
                        className="search-input"
                        placeholder="Search changes..."
                        value={filters.search}
                        onChange={(e) => onFilterChange('search', e.target.value)}
                    />
                </div>
            );
        }

        function CollapsibleSection({ id, icon, title, subtitle, changes, defaultOpen = false }) {
            const [isExpanded, setIsExpanded] = useState(defaultOpen);

            const impactCounts = {
                high: changes.filter(c => c.impact === 'High').length,
                medium: changes.filter(c => c.impact === 'Medium').length,
                low: changes.filter(c => c.impact === 'Low').length
            };

            const renderImpactDots = () => {
                const dots = [];
                for (let i = 0; i < impactCounts.high; i++) dots.push(<span key={`h${i}`} className="impact-dot high" />);
                for (let i = 0; i < impactCounts.medium; i++) dots.push(<span key={`m${i}`} className="impact-dot medium" />);
                for (let i = 0; i < impactCounts.low; i++) dots.push(<span key={`l${i}`} className="impact-dot low" />);
                return dots;
            };

            return (
                <div className="collapsible-section" id={id}>
                    <div
                        className={`section-header ${isExpanded ? 'expanded' : ''}`}
                        onClick={() => setIsExpanded(!isExpanded)}
                    >
                        <span className="section-icon">{icon}</span>
                        <div className="section-info">
                            <div className="section-title">{title}</div>
                            {subtitle && <div className="section-subtitle">{subtitle}</div>}
                        </div>
                        <div className="section-meta">
                            <span className="change-count">{changes.length} changes</span>
                            <div className="impact-dots">
                                {renderImpactDots()}
                            </div>
                        </div>
                        <span className="section-chevron">â–¼</span>
                    </div>

                    <div className={`section-content ${isExpanded ? 'expanded' : ''}`}>
                        {changes.map(change => (
                            <ChangeCard key={change.id} change={change} />
                        ))}
                    </div>
                </div>
            );
        }

        function App() {
            const [filters, setFilters] = useState({
                impact: ['High', 'Medium', 'Low'],
                class: ['All', 'Light', 'Medium', 'Heavy'],
                search: ''
            });

            const handleFilterChange = (type, value) => {
                if (type === 'search') {
                    setFilters(prev => ({ ...prev, search: value }));
                } else {
                    setFilters(prev => {
                        const current = prev[type];
                        const updated = current.includes(value)
                            ? current.filter(v => v !== value)
                            : [...current, value];
                        return { ...prev, [type]: updated };
                    });
                }
            };

            const filterChanges = (changes) => {
                return changes.filter(change => {
                    const matchesImpact = filters.impact.includes(change.impact);
                    const matchesClass = filters.class.includes('All') || filters.class.includes(change.class);
                    const matchesSearch = filters.search === '' ||
                        change.title.toLowerCase().includes(filters.search.toLowerCase()) ||
                        change.details.toLowerCase().includes(filters.search.toLowerCase());

                    return matchesImpact && matchesClass && matchesSearch;
                });
            };

            // Handle deep linking
            useEffect(() => {
                const hash = window.location.hash.slice(1);
                if (hash.startsWith('change-')) {
                    setTimeout(() => {
                        const element = document.getElementById(hash);
                        if (element) {
                            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            element.classList.add('highlight-flash');
                            setTimeout(() => element.classList.remove('highlight-flash'), 2000);
                        }
                    }, 500);
                }
            }, []);

            const sections = [
                {
                    id: 'rules-ranked',
                    icon: 'âš–ï¸',
                    title: 'Rules and Ranked',
                    filter: (c) => c.category === 'System' && (c.id.includes('ranked') || c.id.includes('jeopardy') || c.id.includes('sponsor'))
                },
                {
                    id: 'meta-drivers',
                    icon: 'ðŸŽ¯',
                    title: 'Meta Drivers',
                    subtitle: 'Winch, Goo, Rotations',
                    filter: (c) => ['winch-claw-stun', 'dome-shield-winch', 'mesh-shield-winch', 'gateway-range', 'goo-explosive', 'thermal-bore', 'rpg-damage'].includes(c.id)
                },
                {
                    id: 'weapons-light',
                    icon: 'âš¡',
                    title: 'Weapons: Light',
                    filter: (c) => c.category === 'Weapon' && c.class === 'Light'
                },
                {
                    id: 'weapons-medium',
                    icon: 'âš”ï¸',
                    title: 'Weapons: Medium',
                    filter: (c) => c.category === 'Weapon' && c.class === 'Medium'
                },
                {
                    id: 'weapons-heavy',
                    icon: 'ðŸ’ª',
                    title: 'Weapons: Heavy',
                    filter: (c) => c.category === 'Weapon' && c.class === 'Heavy'
                },
                {
                    id: 'gadgets',
                    icon: 'ðŸ”§',
                    title: 'Gadgets',
                    filter: (c) => c.category === 'Gadget'
                },
                {
                    id: 'specializations',
                    icon: 'âœ¨',
                    title: 'Specializations',
                    filter: (c) => c.category === 'Specialization'
                },
                {
                    id: 'new-content',
                    icon: 'ðŸŽ®',
                    title: 'New Content',
                    subtitle: 'Maps, Modes, Progression',
                    filter: (c) => ['fangwai-city', 'point-break', 'world-tour-2', 'reward-coins', 'kyoto-powershift'].includes(c.id)
                }
            ];

            return (
                <>
                    <div className="site-header">
                        <div className="site-header-content">
                            <div className="site-title">THE FINALS LOADOUT</div>
                            <div className="version-selector">
                                <div className="current-version">
                                    <div className="version-label">Latest Patch</div>
                                    <div className="version-number">Season {PATCH_DATA.season}.0.0</div>
                                </div>
                                <span className="status-badge">LIVE</span>
                            </div>
                        </div>
                    </div>

                    <div className="container">
                        <MetaTLDRCard data={PATCH_DATA} />

                        <div id="full-changes">
                            <FilterBar filters={filters} onFilterChange={handleFilterChange} />

                            {sections.map(section => {
                                const sectionChanges = filterChanges(PATCH_DATA.changes.filter(section.filter));
                                if (sectionChanges.length === 0) return null;

                                return (
                                    <CollapsibleSection
                                        key={section.id}
                                        id={section.id}
                                        icon={section.icon}
                                        title={section.title}
                                        subtitle={section.subtitle}
                                        changes={sectionChanges}
                                        defaultOpen={section.id === 'rules-ranked'}
                                    />
                                );
                            })}
                        </div>
                    </div>
                </>
            );
        }

        // Render app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
