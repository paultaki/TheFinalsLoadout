<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Slot Machine Test</title>
    
    <!-- Base styles -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="real-slot-machine.css">
    
    <style>
        body {
            background: #0a0a0a;
            color: #fff;
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
        }
        
        .test-controls {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: scale(1.05);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .status {
            text-align: center;
            margin: 20px 0;
            font-size: 18px;
            color: #4ade80;
        }
        
        /* Simplified slot machine container */
        .slot-machine-container {
            max-width: 900px;
            margin: 0 auto;
            background: linear-gradient(180deg, #1a1a1a, #0a0a0a);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        
        .slot-viewport {
            display: flex;
            gap: 10px;
            background: #000;
            padding: 10px;
            border-radius: 10px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
        }
        
        .slot-column {
            flex: 1;
            height: 240px;
            background: linear-gradient(180deg, #0a0a0a, #1a1a1a);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        
        .slot-item {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #333;
            background: rgba(255,255,255,0.02);
            transition: all 0.3s;
        }
        
        .slot-item.winner {
            background: linear-gradient(135deg, rgba(255,215,0,0.3), rgba(255,140,0,0.2));
            border: 2px solid gold;
            animation: glow 0.6s ease-in-out;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px gold; }
            50% { box-shadow: 0 0 20px gold, 0 0 30px orange; }
        }
    </style>
</head>
<body>
    <div class="slot-machine-container">
        <h1 style="text-align: center; margin: 0 0 20px 0;">Real Slot Machine Animation Test</h1>
        
        <div class="status" id="status">Ready to spin!</div>
        
        <div class="slot-viewport" id="slotViewport">
            <!-- Columns will be generated here -->
        </div>
        
        <div class="test-controls">
            <button onclick="testSingleSpin()">Single Spin</button>
            <button onclick="testMultiSpin(3)">3 Quick Spins</button>
            <button onclick="testMultiSpin(5)">5 Quick Spins</button>
            <button onclick="resetSlots()">Reset</button>
        </div>
    </div>

    <script>
        // Generate test slot items
        const items = [
            'FCAR', 'AKM', 'M60', 'SA1216', 'V9S', 
            'Mesh Shield', 'Goo Gun', 'RPG-7', 'Defibrillator',
            'Frag Grenade', 'Smoke', 'C4', 'Breach Charge',
            'Dash', 'Grapple', 'Cloak', 'Turret', 'Dome Shield'
        ];
        
        function generateSlotColumn() {
            const column = document.createElement('div');
            column.className = 'slot-column';
            
            const itemsContainer = document.createElement('div');
            itemsContainer.className = 'slot-items';
            
            // Generate 50 items
            for (let i = 0; i < 50; i++) {
                const item = document.createElement('div');
                item.className = 'slot-item';
                item.textContent = items[Math.floor(Math.random() * items.length)];
                itemsContainer.appendChild(item);
            }
            
            column.appendChild(itemsContainer);
            return column;
        }
        
        // Initialize slot machine
        const viewport = document.getElementById('slotViewport');
        const columns = [];
        for (let i = 0; i < 5; i++) {
            const col = generateSlotColumn();
            viewport.appendChild(col);
            columns.push(col);
        }
    </script>

    <!-- Load the real slot machine animation -->
    <script src="real-slot-machine.js"></script>
    
    <script>
        const animation = new RealSlotMachineAnimation();
        const statusEl = document.getElementById('status');
        let spinCount = 0;
        
        async function testSingleSpin() {
            if (animation.isSpinning) return;
            
            spinCount = 1;
            statusEl.textContent = 'Spinning...';
            
            // Generate random final positions
            const finalPositions = columns.map(() => Math.floor(Math.random() * 50));
            
            await animation.spin(columns, finalPositions, 1, 1);
            
            statusEl.textContent = 'Spin complete!';
            setTimeout(() => {
                statusEl.textContent = 'Ready to spin!';
            }, 2000);
        }
        
        async function testMultiSpin(count) {
            if (animation.isSpinning) return;
            
            spinCount = count;
            
            for (let i = 1; i <= count; i++) {
                statusEl.textContent = `Spin ${i} of ${count}...`;
                
                const finalPositions = columns.map(() => Math.floor(Math.random() * 50));
                await animation.spin(columns, finalPositions, count, i);
                
                if (i < count) {
                    await new Promise(resolve => setTimeout(resolve, 300));
                }
            }
            
            statusEl.textContent = `${count} spins complete!`;
            setTimeout(() => {
                statusEl.textContent = 'Ready to spin!';
            }, 2000);
        }
        
        function resetSlots() {
            animation.reset();
            statusEl.textContent = 'Reset! Ready to spin!';
            
            // Clear all winner highlights
            document.querySelectorAll('.slot-item').forEach(item => {
                item.classList.remove('winner');
            });
        }
    </script>
</body>
</html>