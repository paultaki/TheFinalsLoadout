<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Generate Button</title>
</head>
<body>
    <h1>Debug Generate Button Issue</h1>
    
    <button id="test-init">Test Initialization</button>
    <div id="output"></div>

    <script>
        document.getElementById('test-init').addEventListener('click', () => {
            const output = document.getElementById('output');
            let html = '<h2>Debug Info:</h2>';
            
            // Check if app exists
            if (typeof app !== 'undefined' && app) {
                html += '<p>✅ App is defined</p>';
                
                // Check state
                if (app.stateManager) {
                    html += '<p>✅ StateManager exists</p>';
                    const selectedClass = app.stateManager.state.selectedClass;
                    html += `<p>Selected Class: ${selectedClass || 'None'}</p>`;
                } else {
                    html += '<p>❌ StateManager missing</p>';
                }
                
                // Check UI Controller
                if (app.uiController) {
                    html += '<p>✅ UIController exists</p>';
                } else {
                    html += '<p>❌ UIController missing</p>';
                }
            } else {
                html += '<p>❌ App is not defined</p>';
            }
            
            // Check DOM elements
            const generateBtn = document.getElementById('generate-btn');
            if (generateBtn) {
                html += '<p>✅ Generate button found</p>';
                html += `<p>Button disabled: ${generateBtn.disabled}</p>`;
                html += `<p>Button text: ${generateBtn.textContent}</p>`;
            } else {
                html += '<p>❌ Generate button not found</p>';
            }
            
            // Check class buttons
            const classBtns = document.querySelectorAll('.class-btn');
            html += `<p>Class buttons found: ${classBtns.length}</p>`;
            
            classBtns.forEach(btn => {
                const active = btn.classList.contains('active');
                html += `<p>- ${btn.dataset.class}: ${active ? 'Active' : 'Inactive'}</p>`;
            });
            
            // Check for errors in console
            html += '<h3>Console Check:</h3>';
            html += '<p>Open browser console (F12) to check for JavaScript errors</p>';
            
            output.innerHTML = html;
        });
        
        // Auto-check on load
        window.addEventListener('load', () => {
            console.log('Page loaded');
            console.log('App exists?', typeof app !== 'undefined');
            if (typeof app !== 'undefined') {
                console.log('App object:', app);
            }
        });
    </script>
    
    <iframe src="/v3/index.html" width="100%" height="600" style="border: 1px solid #ccc; margin-top: 20px;"></iframe>
</body>
</html>