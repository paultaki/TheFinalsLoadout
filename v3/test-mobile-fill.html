<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Slot Fill Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: monospace;
        }
        .test-info {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #0f0;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .mobile-preview {
            max-width: 375px;
            margin: 0 auto;
            border: 2px solid #666;
            padding: 10px;
            background: #000;
        }
        button {
            padding: 10px 20px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h2>Mobile Slot Fill Test</h2>
        <p>This test verifies that slot machines fill the entire viewport on mobile devices.</p>
        <p id="viewport-info">Loading viewport info...</p>
        <p id="item-count">Item count will appear here after generation</p>
        <button onclick="testSlotGeneration()">Test Slot Generation</button>
    </div>

    <div class="mobile-preview">
        <iframe src="/v3/index.html" style="width: 100%; height: 600px; border: none;"></iframe>
    </div>

    <script>
        // Display viewport information
        function updateViewportInfo() {
            const info = document.getElementById('viewport-info');
            const width = window.innerWidth;
            const height = window.innerHeight;
            const isMobile = width <= 768;
            
            info.innerHTML = `
                Viewport: ${width}x${height}px<br>
                Device: ${isMobile ? 'Mobile' : 'Desktop'}<br>
                Pixel Ratio: ${window.devicePixelRatio}
            `;
        }

        // Test slot generation logic
        function testSlotGeneration() {
            // Simulate the calculation from our fix
            const mockWindowHeight = 400; // Typical mobile slot window height
            const itemHeight = 60; // Mobile item height from CSS
            
            const visibleItems = Math.ceil(mockWindowHeight / itemHeight);
            const bufferItems = 20;
            const totalItems = Math.max(50, visibleItems + (bufferItems * 2));
            const winnerIndex = Math.floor(totalItems / 2);
            
            const info = document.getElementById('item-count');
            info.innerHTML = `
                <strong>Mobile Calculation Results:</strong><br>
                Window Height: ${mockWindowHeight}px<br>
                Item Height: ${itemHeight}px<br>
                Visible Items: ${visibleItems}<br>
                Buffer Items: ${bufferItems} (above and below)<br>
                <strong>Total Items Generated: ${totalItems}</strong><br>
                Winner Position: Index ${winnerIndex}<br>
                <br>
                <span style="color: #4CAF50;">âœ“ Viewport will be fully filled with ${totalItems} items</span>
            `;
        }

        // Update on load and resize
        updateViewportInfo();
        window.addEventListener('resize', updateViewportInfo);
        
        // Auto-run test
        setTimeout(testSlotGeneration, 500);
    </script>
</body>
</html>