<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>S7 World Tour Badge Tracker - The Finals Rank Tracker</title>
    <meta
      name="description"
      content="Track your progress to Emerald rank in The Finals Season 7. Monitor daily points, calculate requirements, and reach your goals efficiently."
    />
    <meta
      name="keywords"
      content="The Finals, rank tracker, Emerald rank, Season 7, progress tracker, gaming"
    />

    <!--  Open Graph / Facebook social   -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="S7 World Tour Progress Tracker - The Finals"
    />
    <meta
      property="og:description"
      content="Track your progress to Emerald rank in The Finals Season 7"
    />
    <meta property="og:image" content="images/social1200x630.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:title"
      content="S7 Emerald Progress Tracker - The Finals"
    />
    <meta
      property="twitter:description"
      content="Track your progress to Emerald rank in The Finals Season 7"
    />
    <meta property="twitter:image" content="images/social1200x630.png" />

    <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
    <link rel="apple-touch-icon" href="images/logo.png" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(
          135deg,
          #0a0a0a 0%,
          #1a1a1a 50%,
          #0d1117 100%
        );
        color: #ffffff;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        padding: 20px;
        min-height: 100vh;
        position: relative;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(80, 200, 120, 0.05) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(0, 255, 204, 0.03) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 1;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
      }

      .logo {
        display: block;
        margin: 0 auto 40px auto;
        max-width: 300px;
        height: auto;
        filter: drop-shadow(0 8px 32px rgba(80, 200, 120, 0.3));
        animation: floatAnimation 6s ease-in-out infinite;
      }

      @keyframes floatAnimation {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      /* Value update animation */
      @keyframes valueUpdate {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
          filter: brightness(1.3);
        }
        100% {
          transform: scale(1);
        }
      }

      .stat-value.updating {
        animation: valueUpdate 0.5s ease-out;
      }

      /* Progress Dashboard */
      .dashboard {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 40px;
      }

      .stat-card {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 24px;
        text-align: center;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        background: rgba(255, 255, 255, 0.05);
        border-color: rgba(255, 255, 255, 0.2);
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: shimmer 3s infinite;
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.5;
        }
        50% {
          transform: scale(1.1);
          opacity: 0.8;
        }
      }

      .stat-label {
        font-size: 0.875em;
        color: #8b949e;
        margin-bottom: 12px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        font-weight: 500;
      }

      .stat-value {
        font-size: 2.5em;
        font-weight: 700;
        background: linear-gradient(135deg, #fff 0%, #8b949e 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
      }

      /* Highlight important stats */
      .stat-card.primary {
        background: rgba(80, 200, 120, 0.08);
        border: 1px solid rgba(80, 200, 120, 0.3);
      }

      .stat-card.primary .stat-value {
        background: linear-gradient(135deg, #50c878 0%, #00ffcc 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        filter: drop-shadow(0 0 20px rgba(80, 200, 120, 0.5));
      }

      .stat-card.warning {
        background: rgba(255, 179, 0, 0.08);
        border: 1px solid rgba(255, 179, 0, 0.3);
      }

      .stat-card.warning .stat-value {
        background: linear-gradient(135deg, #ffb300 0%, #ff6f00 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        filter: drop-shadow(0 0 20px rgba(255, 179, 0, 0.5));
      }

      .stat-card.error {
        background: rgba(255, 71, 87, 0.08);
        border: 1px solid rgba(255, 71, 87, 0.3);
      }

      .stat-card.error .stat-value {
        background: linear-gradient(135deg, #ff4757 0%, #ee5a6f 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        filter: drop-shadow(0 0 20px rgba(255, 71, 87, 0.5));
      }

      .stat-card.success {
        background: rgba(80, 200, 120, 0.12);
        border: 1px solid rgba(80, 200, 120, 0.4);
      }

      .stat-card.success .stat-value {
        background: linear-gradient(135deg, #50c878 0%, #00ffcc 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        filter: drop-shadow(0 0 30px rgba(80, 200, 120, 0.8));
        animation: pulse 2s ease-in-out infinite;
      }

      /* Progress Bar */
      .progress-section {
        margin-bottom: 40px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 20px;
      }

      .progress-section h2 {
        font-size: 1.5em;
        margin-bottom: 20px;
        background: linear-gradient(135deg, #50c878 0%, #00ffcc 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
      }

      .progress-container {
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(80, 200, 120, 0.2);
        border-radius: 50px;
        padding: 4px;
        position: relative;
        height: 24px;
        overflow: hidden;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(
          90deg,
          #50c878 0%,
          #00ffcc 50%,
          #50c878 100%
        );
        background-size: 200% 100%;
        border-radius: 50px;
        transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        box-shadow: 0 0 30px rgba(80, 200, 120, 0.8),
          inset 0 1px 1px rgba(255, 255, 255, 0.3);
        animation: glow 2s ease-in-out infinite;
      }

      @keyframes glow {
        0%,
        100% {
          filter: brightness(1);
          background-position: 0% 50%;
        }
        50% {
          filter: brightness(1.2);
          background-position: 100% 50%;
        }
      }

      .progress-bar::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shine 2s infinite;
      }

      @keyframes shine {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      .progress-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-weight: 600;
        font-size: 0.875em;
        color: #fff;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        z-index: 10;
        letter-spacing: 0.05em;
      }

      .pace-indicator {
        margin-top: 16px;
        text-align: center;
        font-size: 0.9em;
        color: #8b949e;
      }

      .pace-indicator.ahead {
        color: #50c878;
      }

      .pace-indicator.behind {
        color: #ff4757;
      }

      /* Rank Ladder */
      .rank-ladder {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 40px;
      }

      .rank-ladder h2 {
        color: #fff;
        margin-bottom: 24px;
        font-size: 1.5em;
      }

      .rank-item {
        display: grid;
        grid-template-columns: 60px 150px 100px 100px 100px 150px 1fr;
        align-items: center;
        padding: 12px 16px;
        margin-bottom: 8px;
        border-radius: 12px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid transparent;
      }

      .rank-item:hover {
        transform: translateX(4px);
        background: rgba(255, 255, 255, 0.04);
        border-color: rgba(255, 255, 255, 0.1);
      }

      .rank-item.completed {
        background: rgba(80, 200, 120, 0.05);
        border: 1px solid rgba(80, 200, 120, 0.2);
        opacity: 0.7;
      }

      .rank-item.completed::before {
        content: "âœ“";
        position: absolute;
        left: -20px;
        color: #50c878;
        font-size: 1.2em;
      }

      .rank-item.current {
        background: linear-gradient(
          135deg,
          rgba(138, 43, 226, 0.15) 0%,
          rgba(30, 144, 255, 0.15) 100%
        );
        border: 2px solid #8a2be2;
        position: relative;
        transform: scale(1.02);
        box-shadow: 0 0 30px rgba(138, 43, 226, 0.4),
          0 4px 20px rgba(0, 0, 0, 0.3), inset 0 0 20px rgba(138, 43, 226, 0.1);
      }

      .rank-item.current::after {
        content: "CURRENT";
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 0.7em;
        font-weight: 700;
        color: #8a2be2;
        letter-spacing: 0.1em;
        padding: 4px 12px;
        background: rgba(138, 43, 226, 0.1);
        border-radius: 20px;
        border: 1px solid rgba(138, 43, 226, 0.3);
      }

      .rank-item.locked {
        background: rgba(128, 128, 128, 0.03);
        opacity: 0.4;
        filter: grayscale(0.5);
      }

      .rank-icon {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 0.75em;
        position: relative;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        letter-spacing: -0.05em;
        color: #000;
      }

      .rank-icon::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.2) 0%,
          transparent 100%
        );
        border-radius: 50%;
      }

      .rank-status {
        font-size: 0.75em;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .mini-progress {
        height: 6px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 3px;
        overflow: hidden;
        position: relative;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
      }

      .mini-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #50c878 0%, #00ffcc 100%);
        transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 0 10px rgba(80, 200, 120, 0.5);
      }

      /* Win Points Reference */
      .reference-card {
        position: fixed;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        font-size: 0.875em;
        transition: all 0.3s ease;
        z-index: 100;
      }

      .reference-card:hover {
        transform: translateY(-50%) scale(1.05);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      }

      .reference-card h3 {
        background: linear-gradient(135deg, #00ffcc 0%, #50c878 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        margin-bottom: 16px;
        text-align: center;
        font-size: 1em;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .reference-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        padding: 8px 12px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        transition: all 0.2s ease;
      }

      .reference-item:hover {
        background: rgba(80, 200, 120, 0.1);
        transform: translateX(-2px);
      }

      .reference-item span:first-child {
        color: #8b949e;
        font-weight: 500;
      }

      .reference-item span:last-child {
        font-weight: 700;
        background: linear-gradient(135deg, #50c878 0%, #00ffcc 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
      }

      /* Daily Tracker */
      .daily-tracker {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 20px;
        padding: 30px;
      }

      .daily-tracker h2 {
        color: #fff;
        margin-bottom: 24px;
        font-size: 1.5em;
      }

      .daily-input {
        display: grid;
        grid-template-columns: 150px 150px 150px 1fr;
        gap: 12px;
        margin-bottom: 20px;
        align-items: center;
      }

      input {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #fff;
        padding: 12px 16px;
        border-radius: 10px;
        font-size: 0.95em;
        transition: all 0.2s ease;
      }

      input::placeholder {
        color: #8b949e;
      }

      input:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.2);
      }

      input:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.1);
        border-color: #50c878;
        box-shadow: 0 0 0 3px rgba(80, 200, 120, 0.2);
      }

      .points-input-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      #currentPointsInput {
        background: rgba(0, 0, 0, 0.3);
        border: 2px solid transparent;
        background-image: linear-gradient(
            rgba(0, 0, 0, 0.3),
            rgba(0, 0, 0, 0.3)
          ),
          linear-gradient(135deg, #50c878 0%, #00ffcc 100%);
        background-origin: border-box;
        background-clip: padding-box, border-box;
        color: #fff;
        font-size: 2.5em;
        text-align: center;
        width: 150px;
        font-weight: 700;
        padding: 8px;
        border-radius: 12px;
        position: relative;
        z-index: 10;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      #currentPointsInput:hover {
        transform: scale(1.05);
        filter: brightness(1.1);
      }

      #currentPointsInput:focus {
        outline: none;
        box-shadow: 0 0 0 4px rgba(80, 200, 120, 0.3);
      }

      button {
        background: linear-gradient(135deg, #50c878 0%, #00ffcc 100%);
        border: none;
        color: #0a0a0a;
        padding: 12px 24px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        font-size: 0.95em;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      button::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: translate(-50%, -50%);
        transition: width 0.5s, height 0.5s;
      }

      button:hover::before {
        width: 300px;
        height: 300px;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(80, 200, 120, 0.4);
      }

      button:active {
        transform: translateY(0);
      }

      .delete-btn {
        background: linear-gradient(135deg, #ff4757 0%, #ff6348 100%);
        color: #fff;
        padding: 6px 12px;
        font-size: 0.875em;
        margin-left: 12px;
      }

      .delete-btn:hover {
        box-shadow: 0 6px 20px rgba(255, 71, 87, 0.4);
      }

      /* Daily Entries */
      .daily-entries-item {
        padding: 16px;
        margin: 8px 0;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.2s ease;
      }

      .daily-entries-item:hover {
        background: rgba(255, 255, 255, 0.05);
        transform: translateX(4px);
      }

      .entry-points {
        color: #50c878;
        font-weight: 600;
      }

      .entry-date {
        color: #8b949e;
        font-weight: 500;
      }

      .next-rank-name {
        display: block;
        font-size: 0.4em;
        color: #8b949e;
        font-weight: 400;
        margin-top: 4px;
      }

      /* Notification System */
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 8px;
        color: white;
        font-weight: bold;
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .notification.success {
        background: linear-gradient(135deg, #2e6349 0%, #50c878 100%);
        border: 2px solid #50c878;
      }

      .notification.error {
        background: linear-gradient(135deg, #8b0000 0%, #ff6347 100%);
        border: 2px solid #ff6347;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      /* Responsive */
      @media (max-width: 768px) {
        body {
          padding: 10px;
        }

        .logo {
          max-width: 200px;
          margin-bottom: 20px;
        }

        .dashboard {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .stat-card {
          padding: 15px;
        }

        .stat-value {
          font-size: 2em;
        }

        .stat-label {
          font-size: 0.85em;
        }

        #currentPointsInput {
          font-size: 2em;
          width: 120px;
        }

        /* Fix rank ladder for mobile */
        .rank-item {
          display: flex;
          flex-wrap: wrap;
          align-items: center;
          padding: 8px;
          font-size: 0.85em;
        }

        .rank-icon {
          width: 40px;
          height: 40px;
          font-size: 0.7em;
          margin-right: 10px;
        }

        .rank-item > div:nth-child(2) {
          flex: 1;
          min-width: 80px;
        }

        .rank-item > div:nth-child(3),
        .rank-item > div:nth-child(4),
        .rank-item > div:nth-child(5),
        .rank-item > div:nth-child(6) {
          margin: 0 5px;
          font-size: 0.8em;
        }

        .mini-progress {
          width: 100%;
          margin-top: 8px;
          height: 15px;
        }

        /* Make reference card mobile-friendly */
        .reference-card {
          position: fixed;
          bottom: 20px;
          right: 20px;
          top: auto;
          transform: none;
          font-size: 0.8em;
          padding: 10px;
        }

        /* Daily tracker adjustments */
        .daily-input {
          grid-template-columns: 1fr;
          gap: 8px;
        }

        .daily-input input,
        .daily-input button {
          width: 100%;
        }

        /* Progress section */
        .progress-section h2 {
          font-size: 1.3em;
        }

        .progress-container {
          height: 35px;
        }

        .progress-text {
          font-size: 0.9em;
        }

        /* Entry display */
        .daily-tracker {
          padding: 15px;
        }

        /* Delete button positioning */
        .delete-btn {
          white-space: nowrap;
          font-size: 0.8em;
          padding: 4px 8px;
        }
      }

      /* Extra small devices */
      @media (max-width: 480px) {
        .stat-value {
          font-size: 1.8em;
        }

        #currentPointsInput {
          font-size: 1.8em;
          width: 100px;
        }

        .rank-item {
          font-size: 0.75em;
        }

        h2 {
          font-size: 1.2em;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <img
        src="images/logo.webp"
        alt="The Finals S7 Emerald Progress Tracker"
        class="logo"
        loading="lazy"
        onerror="this.src='images/logo.png'; this.onerror=null;"
      />
      <div
        style="
          text-align: center;
          margin-bottom: 32px;
          color: #8b949e;
          font-size: 1.1em;
          letter-spacing: 0.05em;
          font-weight: 500;
        "
      >
        (beta v1)
      </div>

      <!-- Progress Dashboard -->
      <div class="dashboard">
        <div class="stat-card primary">
          <div class="stat-label">Current Points (Click to edit)</div>
          <div class="points-input-container">
            <input
              type="number"
              id="currentPointsInput"
              value="400"
              min="0"
              max="2400"
              aria-label="Current points"
              title="Click to edit your current points"
            />
          </div>
        </div>
        <div class="stat-card warning">
          <div class="stat-label">Days Remaining</div>
          <div class="stat-value" id="daysRemaining">60</div>
        </div>
        <div class="stat-card primary">
          <div class="stat-label">Points Needed Per Day</div>
          <div class="stat-value" id="pointsPerDay">32</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Completion</div>
          <div class="stat-value" id="completion">16.7%</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Points to Next Rank</div>
          <div class="stat-value" id="pointsToNext">
            <span class="next-rank-points">50</span>
            <span class="next-rank-name"></span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Projected Completion</div>
          <div class="stat-value" id="projectedDate">Sept 12</div>
        </div>
      </div>

      <!-- Main Progress Bar -->
      <div class="progress-section">
        <h2>Progress to Emerald 1</h2>
        <div class="progress-container">
          <div
            class="progress-bar"
            id="mainProgress"
            style="width: 16.7%"
          ></div>
          <div class="progress-text">400 / 2400</div>
        </div>
        <div class="pace-indicator" id="paceIndicator"></div>
      </div>

      <!-- Rank Ladder -->
      <div class="rank-ladder">
        <h2 style="color: #50c878; margin-bottom: 20px">Rank Ladder</h2>
        <div id="rankLadder"></div>
      </div>

      <!-- Daily Tracker -->
      <div class="daily-tracker">
        <h2 style="color: #50c878; margin-bottom: 20px">
          Daily Points Tracker
        </h2>
        <div class="daily-input">
          <input type="date" id="dateInput" value="" aria-label="Date" />
          <input
            type="number"
            id="pointsInput"
            placeholder="Points earned"
            aria-label="Points earned"
            min="-100"
            max="100"
          />
          <button onclick="addDailyEntry()" aria-label="Add daily entry">
            Add Entry
          </button>
          <input
            type="text"
            id="notesInput"
            placeholder="Notes (optional)"
            aria-label="Optional notes"
            maxlength="100"
          />
        </div>
        <div id="dailyEntries"></div>
      </div>
    </div>

    <!-- Win Points Reference -->
    <div class="reference-card">
      <h3>Win Points Reference</h3>
      <div class="reference-item">
        <span>Round 1</span>
        <span style="color: #50c878; font-weight: bold">2</span>
      </div>
      <div class="reference-item">
        <span>Round 2</span>
        <span style="color: #50c878; font-weight: bold">6</span>
      </div>
      <div class="reference-item">
        <span>2nd Place</span>
        <span style="color: #50c878; font-weight: bold">14</span>
      </div>
      <div class="reference-item">
        <span>1st Place</span>
        <span style="color: #50c878; font-weight: bold">25</span>
      </div>
    </div>

    <script>
      // Notification system
      function showNotification(message, type = "success") {
        const notification = document.createElement("div");
        notification.className = `notification ${type}`;
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.animation = "slideIn 0.3s ease-out reverse";
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }

      // Rank data
      const ranks = [
        { name: "Gold 4", points: 375, icon: "G4" },
        { name: "Gold 3", points: 450, icon: "G3" },
        { name: "Gold 2", points: 525, icon: "G2" },
        { name: "Gold 1", points: 600, icon: "G1" },
        { name: "Platinum 4", points: 700, icon: "P4" },
        { name: "Platinum 3", points: 800, icon: "P3" },
        { name: "Platinum 2", points: 900, icon: "P2" },
        { name: "Platinum 1", points: 1000, icon: "P1" },
        { name: "Diamond 4", points: 1150, icon: "D4" },
        { name: "Diamond 3", points: 1300, icon: "D3" },
        { name: "Diamond 2", points: 1450, icon: "D2" },
        { name: "Diamond 1", points: 1600, icon: "D1" },
        { name: "Emerald 4", points: 1800, icon: "E4" },
        { name: "Emerald 3", points: 2000, icon: "E3" },
        { name: "Emerald 2", points: 2200, icon: "E2" },
        { name: "Emerald 1", points: 2400, icon: "E1" },
      ];

      // State - with localStorage
      let currentPoints = parseInt(
        localStorage.getItem("currentPoints") || "400"
      );
      let dailyEntries = JSON.parse(
        localStorage.getItem("dailyEntries") || "[]"
      );

      // Season dates configuration
      const SEASON_START_DATE =
        localStorage.getItem("seasonStartDate") || "2025-06-12";
      const SEASON_END_DATE =
        localStorage.getItem("seasonEndDate") || "2025-09-10";

      const startDate = new Date(SEASON_START_DATE);
      const endDate = new Date(SEASON_END_DATE);
      const today = new Date();

      startDate.setHours(0, 0, 0, 0);
      today.setHours(0, 0, 0, 0);
      endDate.setHours(23, 59, 59, 999); // End of the last day

      let daysRemaining = Math.ceil((endDate - today) / (1000 * 60 * 60 * 24));
      const totalSeasonDays = Math.ceil(
        (endDate - startDate) / (1000 * 60 * 60 * 24)
      );
      const daysElapsed = Math.max(
        0,
        Math.ceil((today - startDate) / (1000 * 60 * 60 * 24))
      );

      // Prevent negative or zero days
      if (daysRemaining <= 0) {
        daysRemaining = 1; // Minimum 1 day to prevent division by zero
        console.warn("Season has ended or ends today");
      }

      // Initialize
      const currentDate = new Date();
      const yyyy = currentDate.getFullYear();
      const mm = String(currentDate.getMonth() + 1).padStart(2, "0");
      const dd = String(currentDate.getDate()).padStart(2, "0");
      document.getElementById("dateInput").value = `${yyyy}-${mm}-${dd}`;
      document.getElementById("currentPointsInput").value = currentPoints;

      // Debounce function for performance
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Add event listeners for current points input with debouncing
      const debouncedUpdate = debounce(updateCurrentPoints, 300);

      document
        .getElementById("currentPointsInput")
        .addEventListener("input", function (e) {
          debouncedUpdate(e.target.value);
        });

      document
        .getElementById("currentPointsInput")
        .addEventListener("change", function (e) {
          updateCurrentPoints(e.target.value);
        });

      updateDashboard();
      renderRankLadder();
      renderDailyEntries();

      function updateCurrentPoints(value) {
        let newPoints = parseInt(value) || 0;
        // Validate points range
        newPoints = Math.max(0, Math.min(2400, newPoints));
        currentPoints = newPoints;

        // Update the input if value was clamped
        document.getElementById("currentPointsInput").value = currentPoints;

        localStorage.setItem("currentPoints", currentPoints);
        updateDashboard();
        renderRankLadder();
      }

      function calculateAveragePointsPerDay() {
        // Calculate average based on total points earned since season start
        const seasonStart = new Date(SEASON_START_DATE);
        const today = new Date();

        // Set to start of day for accurate calculation
        seasonStart.setHours(0, 0, 0, 0);
        today.setHours(0, 0, 0, 0);

        // Calculate days since season start
        const daysSinceStart = Math.max(
          1,
          Math.ceil((today - seasonStart) / (1000 * 60 * 60 * 24))
        );

        // Average points per day = current points / days since start
        return currentPoints / daysSinceStart;
      }

      function animateValue(element, newValue) {
        element.textContent = newValue;
        element.classList.add("updating");
        setTimeout(() => element.classList.remove("updating"), 500);
      }

      function updateDashboard() {
        const pointsNeeded = Math.max(0, 2400 - currentPoints);
        const pointsPerDay =
          daysRemaining > 0 ? Math.ceil(pointsNeeded / daysRemaining) : 0;
        const completion = ((currentPoints / 2400) * 100).toFixed(1);

        // Calculate pace-based projection with date
        let projectedMessage;

        if (currentPoints >= 2400) {
          // Player has already reached Emerald 1
          projectedMessage = "Complete!";
        } else {
          // Calculate average points per day since season start
          const avgPointsPerDay = calculateAveragePointsPerDay();

          if (avgPointsPerDay > 0) {
            // Calculate days needed to complete at current pace
            const daysToComplete = Math.ceil(pointsNeeded / avgPointsPerDay);

            // Calculate projected completion date
            const projectedDate = new Date();
            projectedDate.setDate(projectedDate.getDate() + daysToComplete);

            // Check if projection is before season end
            const seasonEnd = new Date(SEASON_END_DATE);

            if (projectedDate <= seasonEnd) {
              // Format the date as "Aug 2"
              projectedMessage = projectedDate.toLocaleDateString("en-US", {
                month: "short",
                day: "numeric",
              });
            } else {
              projectedMessage = "Won't Complete";
            }
          } else {
            // Player hasn't started earning points yet
            projectedMessage = "Won't Complete";
          }
        }

        // Find next rank
        let pointsToNext = 0;
        let nextRankName = "Emerald 1";
        for (let rank of ranks) {
          if (rank.points > currentPoints) {
            pointsToNext = rank.points - currentPoints;
            nextRankName = rank.name;
            break;
          }
        }

        // Update UI with animations
        animateValue(document.getElementById("daysRemaining"), daysRemaining);
        animateValue(document.getElementById("pointsPerDay"), pointsPerDay);
        animateValue(document.getElementById("completion"), completion + "%");
        animateValue(
          document.querySelector("#pointsToNext .next-rank-points"),
          pointsToNext
        );
        document.querySelector(
          "#pointsToNext .next-rank-name"
        ).textContent = `(${nextRankName})`;
        // Update projected completion with appropriate styling
        const projectedElement = document.getElementById("projectedDate");
        animateValue(projectedElement, projectedMessage);

        // Apply appropriate class based on status
        projectedElement.parentElement.classList.remove(
          "warning",
          "success",
          "error",
          "primary"
        );
        if (projectedMessage === "Complete!") {
          projectedElement.parentElement.classList.add("success");
        } else if (projectedMessage === "Won't Complete") {
          projectedElement.parentElement.classList.add("error");
        } else {
          // It's a date projection - they're on track
          projectedElement.parentElement.classList.add("primary");
        }

        // Update main progress bar
        document.getElementById("mainProgress").style.width = completion + "%";
        document.querySelector(
          ".progress-text"
        ).textContent = `${currentPoints} / 2400`;

        // Calculate and update pace indicator
        const expectedProgress = (daysElapsed / totalSeasonDays) * 100;
        const actualProgress = parseFloat(completion);
        const progressDiff = actualProgress - expectedProgress;

        const paceElement = document.getElementById("paceIndicator");
        paceElement.classList.remove("ahead", "behind");

        if (daysElapsed === 0) {
          paceElement.textContent = `Season Day 1 of ${totalSeasonDays}`;
        } else if (currentPoints >= 2400) {
          paceElement.textContent = "ðŸŽ‰ Emerald 1 Achieved!";
          paceElement.classList.add("ahead");
        } else if (Math.abs(progressDiff) < 2) {
          paceElement.textContent = `On pace (Day ${daysElapsed} of ${totalSeasonDays})`;
        } else if (progressDiff > 0) {
          paceElement.textContent = `${progressDiff.toFixed(
            1
          )}% ahead of schedule (Day ${daysElapsed} of ${totalSeasonDays})`;
          paceElement.classList.add("ahead");
        } else {
          paceElement.textContent = `${Math.abs(progressDiff).toFixed(
            1
          )}% behind schedule (Day ${daysElapsed} of ${totalSeasonDays})`;
          paceElement.classList.add("behind");
        }
      }

      function renderRankLadder() {
        const ladder = document.getElementById("rankLadder");
        ladder.innerHTML = "";

        ranks.forEach((rank, index) => {
          const prevPoints = index > 0 ? ranks[index - 1].points : 0;
          const status =
            currentPoints >= rank.points
              ? "completed"
              : currentPoints < rank.points && currentPoints >= prevPoints
              ? "current"
              : "locked";
          const completion = Math.min(
            (currentPoints / rank.points) * 100,
            100
          ).toFixed(0);
          const gap = Math.max(rank.points - currentPoints, 0);

          const rankItem = document.createElement("div");
          rankItem.className = `rank-item ${status}`;

          // Determine icon color based on rank tier
          let iconColor = "#3B7F5F";
          if (rank.name.includes("Emerald")) iconColor = "#50C878";
          else if (rank.name.includes("Diamond")) iconColor = "#87CEEB";
          else if (rank.name.includes("Platinum")) iconColor = "#E5E4E2";
          else if (rank.name.includes("Gold")) iconColor = "#FFD700";

          rankItem.innerHTML = `
                    <div class="rank-icon" style="background: ${iconColor};">${
            rank.icon
          }</div>
                    <div style="font-weight: bold;">${rank.name}</div>
                    <div>${rank.points}</div>
                    <div style="color: ${
                      status === "completed"
                        ? "#50C878"
                        : status === "current"
                        ? "#FFD700"
                        : "#808080"
                    };">${status.toUpperCase()}</div>
                    <div>${completion}%</div>
                    <div>${gap} gap</div>
                    <div class="mini-progress">
                        <div class="mini-progress-bar" style="width: ${completion}%"></div>
                    </div>
                `;

          ladder.appendChild(rankItem);
        });
      }

      function addDailyEntry() {
        const date = document.getElementById("dateInput").value;
        const pointsValue = document.getElementById("pointsInput").value;
        const notes = document.getElementById("notesInput").value.trim();

        if (!date || !pointsValue) {
          showNotification("Please enter both date and points", "error");
          return;
        }

        const points = parseInt(pointsValue);
        if (isNaN(points) || points === 0) {
          showNotification("Please enter a valid points value", "error");
          return;
        }

        // Validate points won't exceed maximum
        if (currentPoints + points > 2400) {
          showNotification("Points cannot exceed 2400 (Emerald 1)", "error");
          return;
        }

        // Allow negative points but warn
        if (
          points < 0 &&
          !confirm("Are you sure you want to add negative points?")
        ) {
          return;
        }

        currentPoints += points;
        dailyEntries.push({ date, points, total: currentPoints, notes });

        // Save to localStorage
        localStorage.setItem("currentPoints", currentPoints);
        localStorage.setItem("dailyEntries", JSON.stringify(dailyEntries));

        // Update input field
        document.getElementById("currentPointsInput").value = currentPoints;

        // Clear inputs
        document.getElementById("pointsInput").value = "";
        document.getElementById("notesInput").value = "";

        // Update everything
        updateDashboard();
        renderRankLadder();
        renderDailyEntries();

        // Show success notification
        showNotification(
          `Added ${
            points > 0 ? "+" : ""
          }${points} points! Total: ${currentPoints}`,
          "success"
        );
      }

      function renderDailyEntries() {
        const container = document.getElementById("dailyEntries");
        container.innerHTML = ""; // Clear safely

        // Add heading
        const heading = document.createElement("h3");
        heading.style.cssText = "color: #50C878; margin-top: 20px;";
        heading.textContent = "Recent Entries";
        container.appendChild(heading);

        dailyEntries
          .slice(-5)
          .reverse()
          .forEach((entry, displayIndex) => {
            const actualIndex = dailyEntries.length - 1 - displayIndex;
            const entryDiv = document.createElement("div");
            entryDiv.className = "daily-entries-item";

            // Create content div
            const contentDiv = document.createElement("div");

            // Date
            const dateStrong = document.createElement("strong");
            dateStrong.className = "entry-date";
            dateStrong.textContent = entry.date;
            contentDiv.appendChild(dateStrong);
            contentDiv.appendChild(document.createTextNode(" - "));

            // Points
            const pointsSpan = document.createElement("span");
            pointsSpan.className = "entry-points";
            pointsSpan.textContent = `${entry.points > 0 ? "+" : ""}${
              entry.points
            } points`;
            contentDiv.appendChild(pointsSpan);
            contentDiv.appendChild(
              document.createTextNode(" - Total: " + entry.total)
            );

            // Notes
            if (entry.notes) {
              contentDiv.appendChild(
                document.createTextNode(" - " + entry.notes)
              );
            }

            // Delete button
            const deleteBtn = document.createElement("button");
            deleteBtn.className = "delete-btn";
            deleteBtn.textContent = "Delete";
            deleteBtn.onclick = () => deleteEntry(actualIndex);

            entryDiv.appendChild(contentDiv);
            entryDiv.appendChild(deleteBtn);
            container.appendChild(entryDiv);
          });
      }

      function deleteEntry(index) {
        if (confirm("Are you sure you want to delete this entry?")) {
          // Remove the entry
          dailyEntries.splice(index, 1);

          // Recalculate all running totals
          let runningTotal = 0;
          dailyEntries.forEach((entry) => {
            runningTotal += entry.points;
            entry.total = runningTotal;
          });

          // Update current points
          currentPoints = runningTotal;

          // Update localStorage
          localStorage.setItem("currentPoints", currentPoints);
          localStorage.setItem("dailyEntries", JSON.stringify(dailyEntries));

          // Update input field
          document.getElementById("currentPointsInput").value = currentPoints;

          // Update everything
          updateDashboard();
          renderRankLadder();
          renderDailyEntries();
        }
      }
    </script>
  </body>
</html>
