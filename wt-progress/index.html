<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>THE FINALS World Tour Tracker - Season 8 Rank Calculator | Real-Time Progress</title>
    <meta
      name="description"
      content="Track your World Tour progress in THE FINALS Season 8. Calculate daily points needed for any rank from Bronze to Emerald, visualize your pace, share progress screenshots. Free rank calculator with 28 ranks from Bronze IV to Emerald I."
    />

    <meta
      name="keywords"
      content="THE FINALS World Tour tracker, Emerald rank calculator, Season 8 progress, daily points calculator, rank tracker, gaming tools"
    />

    <!-- Mobile Web App Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="WT Tracker">

    <!-- Performance Optimizations -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" as="style">

    <!--  Open Graph / Facebook social   -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://www.thefinalsloadout.com/wt-progress/"
    />
    <meta
      property="og:title"
      content="S8 World Tour Progress Tracker - The Finals"
    />
    <meta
      property="og:description"
      content="Track your progress to any rank in The Finals Season 8"
    />
    <meta
      property="og:image"
      content="https://www.thefinalsloadout.com/wt-progress/images/social1200x630.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:type" content="image/png" />
    <meta
      property="og:url"
      content="https://www.thefinalsloadout.com/wt-progress/"
    />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="S8 World Tour Progress Tracker - The Finals"
    />
    <meta
      name="twitter:description"
      content="Track your progress to any rank in The Finals Season 8"
    />
    <meta
      name="twitter:image"
      content="https://www.thefinalsloadout.com/wt-progress/images/social1200x630.png"
    />
    <meta
      name="twitter:url"
      content="https://www.thefinalsloadout.com/wt-progress/"
    />

    <!-- Structured Data - WebApplication -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "THE FINALS World Tour Progress Tracker",
      "applicationCategory": "GameApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "200"
      },
      "description": "Track World Tour progress and calculate points needed for any rank",
      "screenshot": "https://thefinalsloadout.com/wt-progress/images/screenshot.png"
    }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "How many points do I need for Emerald rank in THE FINALS Season 8?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "You need 5,325 points to reach Emerald I, the highest rank in World Tour. Emerald IV starts at 3,750 points."
        }
      },{
        "@type": "Question",
        "name": "How do World Tour points work in Season 8?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "In World Tour Season 8: Win = 21 points, 2nd place = 12 points, 3rd place = 8 points, Qualified (Round 2) = 5 points, Eliminated (Round 1) = 2 points."
        }
      },{
        "@type": "Question",
        "name": "How long is THE FINALS Season 8?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Season 8 runs from December 11, 2024 to March 12, 2025, lasting 91 days total."
        }
      }]
    }
    </script>

    <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
    <link rel="apple-touch-icon" href="images/logo.png" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Accessibility - Screen reader only content */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      /* Focus indicators */
      *:focus {
        outline: 2px solid #50c878;
        outline-offset: 2px;
      }

      button:focus,
      input:focus,
      select:focus,
      a:focus {
        outline: 3px solid #50c878;
        outline-offset: 3px;
        box-shadow: 0 0 0 4px rgba(80, 200, 120, 0.2);
      }

      body {
        background: linear-gradient(
          135deg,
          #0a0a0a 0%,
          #1a1a1a 50%,
          #0d1117 100%
        );
        color: #ffffff;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        padding: 0;
        margin: 0;
        min-height: 100vh;
        position: relative;
        padding-top: 80px;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(80, 200, 120, 0.05) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(0, 255, 204, 0.03) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 1;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        position: relative;
        z-index: 2;
      }

      /* Season 8 Badge */
      .season-badge {
        display: inline-flex;
        align-items: center;
        background: linear-gradient(135deg, #50c878, #20b2aa);
        color: #000;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 700;
        margin-bottom: 1rem;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }

      /* Goal Selector */
      .goal-selector-container {
        background: linear-gradient(135deg, rgba(80, 200, 120, 0.15) 0%, rgba(80, 200, 120, 0.05) 100%);
        border: 2px solid #50c878;
        border-radius: 15px;
        padding: 1.5rem;
        margin: 2rem 0;
        box-shadow: 0 0 30px rgba(80, 200, 120, 0.3);
      }

      .goal-selector-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .goal-selector-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #50c878;
      }

      .goal-selector {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .goal-select {
        background: rgba(0, 0, 0, 0.6);
        border: 2px solid #50c878;
        color: #fff;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        min-width: 200px;
      }

      .goal-select:hover {
        background: rgba(80, 200, 120, 0.2);
        transform: translateY(-2px);
      }

      .goal-display {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1.1rem;
      }

      .goal-rank-icon {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 0.8rem;
      }

      .goal-points {
        color: #b0b0b0;
        font-size: 0.9rem;
      }

      /* Stats Grid */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        backdrop-filter: blur(10px);
        transition: all 0.3s;
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border-color: rgba(80, 200, 120, 0.3);
      }

      .stat-card.primary {
        background: linear-gradient(
          135deg,
          rgba(80, 200, 120, 0.1) 0%,
          rgba(80, 200, 120, 0.05) 100%
        );
        border: 2px solid #50c878;
      }

      .stat-label {
        font-size: 0.9em;
        color: #b0b0b0;
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .stat-value {
        font-size: 2.5em;
        font-weight: 700;
        background: linear-gradient(135deg, #50c878, #20b2aa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .points-input-container {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .points-input {
        background: transparent;
        border: none;
        color: #50c878;
        font-size: 2.5em;
        font-weight: 700;
        text-align: center;
        width: 150px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .points-input:hover {
        transform: scale(1.05);
      }

      .points-input:focus {
        outline: 2px dashed #50c878;
        outline-offset: 5px;
        background: rgba(80, 200, 120, 0.1);
        border-radius: 10px;
      }

      /* Progress Section */
      .progress-section {
        margin: 30px 0;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 15px;
        padding: 25px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .progress-section h2 {
        margin-bottom: 20px;
        font-size: 1.5em;
        background: linear-gradient(135deg, #50c878, #20b2aa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .progress-container {
        position: relative;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        overflow: hidden;
        margin-bottom: 15px;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #50c878, #20b2aa);
        border-radius: 20px;
        transition: width 0.5s ease;
        box-shadow: 0 0 20px rgba(80, 200, 120, 0.5);
      }

      .progress-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-weight: 600;
        font-size: 1.1em;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      }

      .pace-indicator {
        text-align: center;
        padding: 10px;
        border-radius: 10px;
        font-weight: 600;
        transition: all 0.3s;
      }

      .pace-indicator.ahead {
        background: rgba(80, 200, 120, 0.2);
        color: #50c878;
      }

      .pace-indicator.behind {
        background: rgba(255, 71, 87, 0.2);
        color: #ff4757;
      }

      .pace-indicator.on-track {
        background: rgba(255, 193, 7, 0.2);
        color: #ffc107;
      }

      /* Quick Actions */
      .quick-actions {
        display: flex;
        gap: 10px;
        margin: 20px 0;
        flex-wrap: wrap;
        justify-content: center;
      }

      .quick-action-btn {
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(255, 255, 255, 0.2);
        color: #ffffff;
        padding: 12px 20px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        min-width: 120px;
      }

      .quick-action-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        background: rgba(80, 200, 120, 0.2);
        border-color: #50c878;
      }

      .quick-action-btn.win {
        border-color: #ffd700;
        background: rgba(255, 215, 0, 0.1);
      }

      .quick-action-points {
        font-weight: 800;
        font-size: 1.1em;
        color: #50c878;
      }

      /* Rank Ladder */
      .rank-ladder {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 15px;
        padding: 20px;
        margin: 30px 0;
        max-height: 600px;
        overflow-y: auto;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .rank-ladder h2 {
        margin-bottom: 20px;
        font-size: 1.5em;
        background: linear-gradient(135deg, #50c878, #20b2aa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: sticky;
        top: 0;
        background-color: rgba(10, 10, 10, 0.95);
        padding: 10px 0;
        z-index: 10;
      }

      .rank-item {
        display: grid;
        grid-template-columns: 60px 1fr auto auto;
        align-items: center;
        padding: 15px;
        margin-bottom: 10px;
        background: rgba(255, 255, 255, 0.02);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        transition: all 0.3s;
        opacity: 0;
        animation: fadeInUp 0.5s forwards;
      }

      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
        from {
          opacity: 0;
          transform: translateY(20px);
        }
      }

      .rank-item:hover {
        transform: translateX(5px);
        background: rgba(80, 200, 120, 0.1);
        border-color: rgba(80, 200, 120, 0.3);
      }

      .rank-item.completed {
        background: rgba(80, 200, 120, 0.15);
        border-color: #50c878;
      }

      .rank-item.current {
        background: rgba(255, 193, 7, 0.15);
        border-color: #ffc107;
        box-shadow: 0 0 20px rgba(255, 193, 7, 0.3);
      }

      .rank-icon {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 0.9rem;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      /* Rank colors */
      .rank-bronze { background: linear-gradient(135deg, #CD7F32, #8B4513); }
      .rank-silver { background: linear-gradient(135deg, #C0C0C0, #808080); }
      .rank-gold { background: linear-gradient(135deg, #FFD700, #FFA500); }
      .rank-platinum { background: linear-gradient(135deg, #E5E4E2, #B0B0B0); }
      .rank-diamond { background: linear-gradient(135deg, #B9F2FF, #00CED1); }
      .rank-ruby { background: linear-gradient(135deg, #E0115F, #8B0020); }
      .rank-emerald { background: linear-gradient(135deg, #50C878, #2E8B57); }

      /* Daily Entries */
      .daily-entries-section {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 15px;
        padding: 25px;
        margin: 30px 0;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .entry-form {
        display: grid;
        grid-template-columns: 1fr 1fr 2fr auto;
        gap: 10px;
        margin-bottom: 20px;
      }

      .entry-input {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: #ffffff;
        padding: 10px;
        border-radius: 8px;
        font-size: 1em;
      }

      .entry-input:focus {
        border-color: #50c878;
        background: rgba(80, 200, 120, 0.1);
      }

      .add-entry-btn {
        background: linear-gradient(135deg, #50c878, #20b2aa);
        color: #000;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s;
      }

      .add-entry-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(80, 200, 120, 0.3);
      }

      .entries-list {
        max-height: 400px;
        overflow-y: auto;
      }

      .entry-item {
        display: grid;
        grid-template-columns: 100px 80px 1fr auto;
        align-items: center;
        padding: 12px;
        margin-bottom: 8px;
        background: rgba(255, 255, 255, 0.02);
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        transition: all 0.3s;
      }

      .entry-item:hover {
        background: rgba(80, 200, 120, 0.05);
        transform: translateX(5px);
      }

      .entry-points {
        color: #50c878;
        font-weight: 600;
      }

      /* Notification */
      .notification {
        position: fixed;
        top: 100px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 10px;
        background: rgba(80, 200, 120, 0.9);
        color: #000;
        font-weight: 600;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        transform: translateX(400px);
        transition: transform 0.3s;
        z-index: 1000;
      }

      .notification.show {
        transform: translateX(0);
      }

      .notification.error {
        background: rgba(255, 71, 87, 0.9);
        color: #fff;
      }

      /* Confetti */
      .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        background: #50c878;
        animation: confetti-fall 3s linear;
        z-index: 999;
      }

      @keyframes confetti-fall {
        to {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }

      /* Milestone Popup */
      .milestone-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        background: linear-gradient(135deg, rgba(10, 10, 10, 0.98) 0%, rgba(26, 26, 26, 0.98) 100%);
        border: 3px solid #50c878;
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        z-index: 1001;
        animation: milestone-appear 0.5s forwards;
        box-shadow: 0 0 50px rgba(80, 200, 120, 0.5);
      }

      @keyframes milestone-appear {
        to {
          transform: translate(-50%, -50%) scale(1);
        }
      }

      .milestone-icon {
        font-size: 4em;
        margin-bottom: 15px;
      }

      .milestone-title {
        font-size: 2em;
        font-weight: 700;
        margin-bottom: 10px;
        background: linear-gradient(135deg, #50c878, #20b2aa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .milestone-message {
        font-size: 1.2em;
        color: #b0b0b0;
        margin-bottom: 20px;
      }

      .milestone-close {
        background: linear-gradient(135deg, #50c878, #20b2aa);
        color: #000;
        border: none;
        padding: 12px 30px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 700;
        font-size: 1.1em;
        transition: all 0.3s;
      }

      .milestone-close:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(80, 200, 120, 0.3);
      }

      /* Celebration State */
      .celebration-mode {
        animation: celebration-pulse 2s infinite;
      }

      @keyframes celebration-pulse {
        0%, 100% {
          box-shadow: 0 0 30px rgba(80, 200, 120, 0.5);
        }
        50% {
          box-shadow: 0 0 50px rgba(80, 200, 120, 0.8);
        }
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        body {
          padding-top: 60px;
        }

        .container {
          padding: 10px;
        }

        .stats-grid {
          grid-template-columns: 1fr;
        }

        .goal-selector-header {
          flex-direction: column;
          align-items: stretch;
        }

        .goal-select {
          width: 100%;
          font-size: 1.1rem;
          padding: 1rem;
          touch-action: manipulation;
        }

        .entry-form {
          grid-template-columns: 1fr;
        }

        .quick-actions {
          flex-direction: column;
        }

        .quick-action-btn {
          width: 100%;
          min-height: 60px;
          font-size: 1.1rem;
        }

        .rank-item {
          grid-template-columns: 50px 1fr auto;
          font-size: 0.9rem;
        }

        .rank-item > div:last-child {
          display: none;
        }

        /* Touch-friendly scrolling */
        .rank-ladder {
          -webkit-overflow-scrolling: touch;
          scroll-behavior: smooth;
        }

        /* Swipe hint */
        .rank-ladder::after {
          content: "↕ Swipe to scroll";
          display: block;
          text-align: center;
          color: #666;
          font-size: 0.8rem;
          margin-top: 10px;
        }
      }

      /* Loading state */
      .loading {
        opacity: 0.5;
        pointer-events: none;
      }

      /* Last updated indicator */
      .last-updated {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 0.85rem;
        color: #b0b0b0;
        border: 1px solid rgba(255, 255, 255, 0.1);
        z-index: 100;
      }

      /* Screenshot mode */
      .screenshot-mode .last-updated {
        display: none;
      }

      /* Nav */
      nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(10, 10, 10, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        z-index: 999;
        padding: 15px 0;
      }

      .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .nav-logo {
        display: flex;
        align-items: center;
        gap: 10px;
        text-decoration: none;
        color: #fff;
        font-weight: 700;
        font-size: 1.2rem;
      }

      .nav-actions {
        display: flex;
        gap: 15px;
      }

      .nav-btn {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: #fff;
        padding: 8px 16px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
      }

      .nav-btn:hover {
        background: rgba(80, 200, 120, 0.2);
        border-color: #50c878;
      }

      /* Scrollbar styling */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb {
        background: rgba(80, 200, 120, 0.5);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: rgba(80, 200, 120, 0.7);
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav>
      <div class="nav-container">
        <a href="/" class="nav-logo">
          <span>🎮</span>
          <span>THE FINALS Tracker</span>
        </a>
        <div class="nav-actions">
          <button class="nav-btn" onclick="shareProgress()">📤 Share</button>
          <button class="nav-btn" onclick="takeScreenshot()">📸 Screenshot</button>
          <button class="nav-btn" onclick="resetData()">🔄 Reset</button>
        </div>
      </div>
    </nav>

    <div class="container">
      <!-- Hero Section -->
      <div style="text-align: center; max-width: 800px; margin: 1rem auto 2rem; padding: 0 1rem;">
        <span class="season-badge">✨ SEASON 8</span>
        <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; background: linear-gradient(135deg, #50c878, #20b2aa); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
          World Tour Progress Tracker
        </h1>
        <p style="font-size: 0.95rem; color: #b0b0b0; margin-bottom: 1rem;">
          September 11, 2025 - December 11, 2025 • 91 Days
        </p>
      </div>

      <!-- Goal Selector -->
      <div class="goal-selector-container">
        <div class="goal-selector-header">
          <div class="goal-selector-title">🎯 Your Goal</div>
          <div class="goal-selector">
            <select id="goalSelect" class="goal-select" onchange="updateGoal()">
              <!-- Options will be populated by JavaScript -->
            </select>
            <div class="goal-display">
              <div id="goalIcon" class="goal-rank-icon"></div>
              <div>
                <div id="goalName" style="font-weight: 700;"></div>
                <div id="goalPoints" class="goal-points"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card primary">
          <div class="stat-label">Current Points</div>
          <div class="points-input-container">
            <input
              type="number"
              id="currentPoints"
              class="points-input"
              value="0"
              min="0"
              max="5325"
              aria-label="Current points"
              title="Click to edit your current points"
            />
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Days Remaining</div>
          <div class="stat-value" id="daysRemaining">--</div>
        </div>

        <div class="stat-card primary">
          <div class="stat-label">Points Needed Per Day</div>
          <div class="stat-value" id="pointsPerDay">--</div>
          <div class="goal-breakdown" id="goalBreakdown"></div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Projected Completion</div>
          <div class="stat-value" id="completion" style="font-size: 1.5em;">--</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Points to Next Rank</div>
          <div class="stat-value" id="pointsToNext">
            <span class="next-rank-points">--</span>
            <span class="next-rank-name" style="font-size: 0.5em; display: block;"></span>
          </div>
        </div>
      </div>

      <!-- Progress Section -->
      <div class="progress-section">
        <h2 id="progressTitle">Progress to Goal</h2>
        <div class="progress-container">
          <div id="progressBar" class="progress-bar" style="width: 0%"></div>
          <div id="progressText" class="progress-text">0 / 0</div>
        </div>
        <div class="pace-indicator" id="paceIndicator">Calculating pace...</div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <button class="quick-action-btn win" onclick="quickAddPoints(21)">
          <span>🏆 Win</span>
          <span class="quick-action-points">+21</span>
        </button>
        <button class="quick-action-btn" onclick="quickAddPoints(12)">
          <span>🥈 2nd Place</span>
          <span class="quick-action-points">+12</span>
        </button>
        <button class="quick-action-btn" onclick="quickAddPoints(8)">
          <span>🥉 3rd Place</span>
          <span class="quick-action-points">+8</span>
        </button>
        <button class="quick-action-btn" onclick="quickAddPoints(5)">
          <span>✅ Qualified</span>
          <span class="quick-action-points">+5</span>
        </button>
        <button class="quick-action-btn" onclick="quickAddPoints(2)">
          <span>❌ Eliminated</span>
          <span class="quick-action-points">+2</span>
        </button>
        <button id="undoButton" class="quick-action-btn" onclick="undoLastAdd()" style="border-color: #ff4757; color: #ff4757;">
          <span>↩️ Undo</span>
          <span class="quick-action-points" id="undoPoints">-0</span>
        </button>
      </div>

      <!-- Rank Ladder -->
      <div class="rank-ladder">
        <h2>Rank Progression</h2>
        <div id="rankLadder"></div>
      </div>

      <!-- Daily Entries -->
      <div class="daily-entries-section">
        <h2 style="margin-bottom: 20px; background: linear-gradient(135deg, #50c878, #20b2aa); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
          Daily Progress Log
        </h2>
        <div class="entry-form">
          <input type="date" id="dateInput" class="entry-input" />
          <input type="number" id="pointsInput" class="entry-input" placeholder="Points" />
          <input type="text" id="notesInput" class="entry-input" placeholder="Notes (optional)" />
          <button class="add-entry-btn" onclick="addDailyEntry()">Add Entry</button>
        </div>
        <div class="entries-list" id="entriesList"></div>
      </div>
    </div>

    <!-- Last Updated Indicator -->
    <div class="last-updated" id="lastUpdated">
      Last updated: just now
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
      // Season 8 Configuration
      const STORAGE_VERSION = 'v8.0';
      const SEASON_START_DATE = '2025-09-11';
      const SEASON_END_DATE = '2025-12-11';
      const SEASON_DAYS = 91;

      // Season 8 Ranks
      const ranks = [
        { name: "Bronze IV", points: 300, icon: "B4", color: "#CD7F32", tier: "bronze" },
        { name: "Bronze III", points: 375, icon: "B3", color: "#CD7F32", tier: "bronze" },
        { name: "Bronze II", points: 450, icon: "B2", color: "#CD7F32", tier: "bronze" },
        { name: "Bronze I", points: 525, icon: "B1", color: "#CD7F32", tier: "bronze" },
        { name: "Silver IV", points: 625, icon: "S4", color: "#C0C0C0", tier: "silver" },
        { name: "Silver III", points: 725, icon: "S3", color: "#C0C0C0", tier: "silver" },
        { name: "Silver II", points: 825, icon: "S2", color: "#C0C0C0", tier: "silver" },
        { name: "Silver I", points: 925, icon: "S1", color: "#C0C0C0", tier: "silver" },
        { name: "Gold IV", points: 1050, icon: "G4", color: "#FFD700", tier: "gold" },
        { name: "Gold III", points: 1175, icon: "G3", color: "#FFD700", tier: "gold" },
        { name: "Gold II", points: 1300, icon: "G2", color: "#FFD700", tier: "gold" },
        { name: "Gold I", points: 1425, icon: "G1", color: "#FFD700", tier: "gold" },
        { name: "Platinum IV", points: 1575, icon: "P4", color: "#E5E4E2", tier: "platinum" },
        { name: "Platinum III", points: 1725, icon: "P3", color: "#E5E4E2", tier: "platinum" },
        { name: "Platinum II", points: 1875, icon: "P2", color: "#E5E4E2", tier: "platinum" },
        { name: "Platinum I", points: 2025, icon: "P1", color: "#E5E4E2", tier: "platinum" },
        { name: "Diamond IV", points: 2200, icon: "D4", color: "#B9F2FF", tier: "diamond" },
        { name: "Diamond III", points: 2375, icon: "D3", color: "#B9F2FF", tier: "diamond" },
        { name: "Diamond II", points: 2550, icon: "D2", color: "#B9F2FF", tier: "diamond" },
        { name: "Diamond I", points: 2725, icon: "D1", color: "#B9F2FF", tier: "diamond" },
        { name: "Ruby IV", points: 2925, icon: "R4", color: "#E0115F", tier: "ruby" },
        { name: "Ruby III", points: 3125, icon: "R3", color: "#E0115F", tier: "ruby" },
        { name: "Ruby II", points: 3325, icon: "R2", color: "#E0115F", tier: "ruby" },
        { name: "Ruby I", points: 3525, icon: "R1", color: "#E0115F", tier: "ruby" },
        { name: "Emerald IV", points: 3750, icon: "E4", color: "#50C878", tier: "emerald" },
        { name: "Emerald III", points: 3975, icon: "E3", color: "#50C878", tier: "emerald" },
        { name: "Emerald II", points: 4200, icon: "E2", color: "#50C878", tier: "emerald" },
        { name: "Emerald I", points: 5325, icon: "E1", color: "#50C878", tier: "emerald" }
      ];

      // Storage Management with Versioning
      class StorageManager {
        constructor() {
          this.cache = {};
          this.cacheTimestamps = {};
          this.CACHE_TTL = 5 * 60 * 1000; // 5 minutes
          this.initializeStorage();
        }

        initializeStorage() {
          try {
            const version = localStorage.getItem('cacheVersion');
            
            if (version !== STORAGE_VERSION) {
              this.migrateData(version);
            }

            // Initialize with defaults if needed
            this.ensureDefaults();
            
            // Update last visit
            localStorage.setItem('lastVisit', Date.now().toString());
            
          } catch (error) {
            console.error('Storage initialization error:', error);
            this.handleStorageError(error);
          }
        }

        migrateData(oldVersion) {
          if (!oldVersion) {
            // Fresh install
            this.clearStorage();
          } else if (oldVersion === 'v7.0') {
            // Migrate from Season 7
            const shouldMigrate = confirm('Season 7 data detected. Would you like to convert your progress proportionally to Season 8? (Cancel for fresh start)');
            
            if (shouldMigrate) {
              this.migrateFromSeason7();
            } else {
              this.clearStorage();
            }
          }
          
          localStorage.setItem('cacheVersion', STORAGE_VERSION);
        }

        migrateFromSeason7() {
          try {
            const oldPoints = parseInt(localStorage.getItem('currentPoints') || '0');
            // Proportional conversion: S7 max was 2400, S8 max is 5325
            const conversionRatio = 5325 / 2400;
            const newPoints = Math.round(oldPoints * conversionRatio);
            
            localStorage.setItem('currentPoints', newPoints.toString());
            
            // Clear old daily entries as they won't match new point system
            localStorage.removeItem('dailyEntries');
            
            showNotification(`Migrated to Season 8! Your ${oldPoints} points converted to ${newPoints} points.`, 'success');
          } catch (error) {
            console.error('Migration error:', error);
            this.clearStorage();
          }
        }

        ensureDefaults() {
          const defaults = {
            currentPoints: '0',
            selectedGoal: 'Emerald I',
            dailyEntries: '[]',
            undoHistory: '[]',
            seasonStartDate: SEASON_START_DATE,
            seasonEndDate: SEASON_END_DATE,
            cacheVersion: STORAGE_VERSION
          };

          for (const [key, value] of Object.entries(defaults)) {
            if (!localStorage.getItem(key)) {
              localStorage.setItem(key, value);
            }
          }
        }

        get(key, defaultValue = null) {
          try {
            // Check cache first
            if (this.cache[key] && this.cacheTimestamps[key]) {
              const age = Date.now() - this.cacheTimestamps[key];
              if (age < this.CACHE_TTL) {
                return this.cache[key];
              }
            }

            const value = localStorage.getItem(key);
            if (value === null) return defaultValue;

            // Try to parse JSON
            try {
              const parsed = JSON.parse(value);
              this.cache[key] = parsed;
              this.cacheTimestamps[key] = Date.now();
              return parsed;
            } catch {
              return value;
            }
          } catch (error) {
            console.error(`Error getting ${key}:`, error);
            return defaultValue;
          }
        }

        set(key, value) {
          try {
            const stringValue = typeof value === 'string' ? value : JSON.stringify(value);
            
            // Compress large data
            if (key === 'dailyEntries' && stringValue.length > 10000) {
              this.compressEntries();
            }
            
            localStorage.setItem(key, stringValue);
            this.cache[key] = value;
            this.cacheTimestamps[key] = Date.now();
            
            // Update last updated time
            this.updateLastUpdated();
            
            return true;
          } catch (error) {
            if (error.name === 'QuotaExceededError') {
              this.handleQuotaExceeded();
            }
            console.error(`Error setting ${key}:`, error);
            return false;
          }
        }

        compressEntries() {
          const entries = this.get('dailyEntries', []);
          if (entries.length > 50) {
            // Keep only last 50 entries
            const compressed = entries.slice(-50);
            localStorage.setItem('dailyEntries', JSON.stringify(compressed));
            showNotification('Compressed old entries to save space', 'info');
          }
        }

        handleQuotaExceeded() {
          // Clear old data
          const entries = this.get('dailyEntries', []);
          if (entries.length > 10) {
            const recent = entries.slice(-10);
            this.set('dailyEntries', recent);
            showNotification('Cleared old entries due to storage limit', 'info');
          }
        }

        handleStorageError(error) {
          console.error('Storage error:', error);
          if (confirm('Storage error detected. Reset data?')) {
            this.clearStorage();
            location.reload();
          }
        }

        clearStorage() {
          const keysToKeep = ['cacheVersion'];
          const allKeys = Object.keys(localStorage);
          
          allKeys.forEach(key => {
            if (!keysToKeep.includes(key)) {
              localStorage.removeItem(key);
            }
          });
          
          this.cache = {};
          this.cacheTimestamps = {};
        }

        updateLastUpdated() {
          const now = Date.now();
          const lastVisit = parseInt(localStorage.getItem('lastVisit') || '0');
          const diff = now - lastVisit;
          
          let text = 'Last updated: ';
          if (diff < 60000) {
            text += 'just now';
          } else if (diff < 3600000) {
            text += `${Math.floor(diff / 60000)} minutes ago`;
          } else if (diff < 86400000) {
            text += `${Math.floor(diff / 3600000)} hours ago`;
          } else {
            text += `${Math.floor(diff / 86400000)} days ago`;
          }
          
          const element = document.getElementById('lastUpdated');
          if (element) {
            element.textContent = text;
          }
        }
      }

      // Initialize storage manager
      const storage = new StorageManager();

      // Global state
      let currentPoints = 0;
      let selectedGoal = 'Emerald I';
      let dailyEntries = [];
      let undoHistory = [];
      let daysRemaining = 0;
      let isUpdating = false;

      // Debounce function
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Initialize on load
      document.addEventListener('DOMContentLoaded', () => {
        initializeApp();
      });

      function initializeApp() {
        // Load saved data
        currentPoints = parseInt(storage.get('currentPoints', 0));
        selectedGoal = storage.get('selectedGoal', 'Emerald I');
        dailyEntries = storage.get('dailyEntries', []);
        undoHistory = storage.get('undoHistory', []);

        // Initialize UI
        initializeGoalSelector();
        initializePointsInput();
        calculateDaysRemaining();
        updateDashboard();
        renderRankLadder();
        renderDailyEntries();

        // Set today's date in entry form
        document.getElementById('dateInput').valueAsDate = new Date();

        // Update last updated indicator every minute
        setInterval(() => storage.updateLastUpdated(), 60000);
      }

      function initializeGoalSelector() {
        const select = document.getElementById('goalSelect');
        select.innerHTML = '';
        
        ranks.forEach(rank => {
          const option = document.createElement('option');
          option.value = rank.name;
          option.textContent = `${rank.name} (${rank.points} points)`;
          if (rank.name === selectedGoal) {
            option.selected = true;
          }
          select.appendChild(option);
        });

        updateGoalDisplay();
      }

      function initializePointsInput() {
        const input = document.getElementById('currentPoints');
        input.value = currentPoints;
        
        // Debounced update
        const debouncedUpdate = debounce((value) => {
          updateCurrentPoints(parseInt(value) || 0);
        }, 500);
        
        input.addEventListener('input', (e) => {
          debouncedUpdate(e.target.value);
        });

        input.addEventListener('focus', () => {
          input.select();
        });
      }

      function updateGoal() {
        const select = document.getElementById('goalSelect');
        selectedGoal = select.value;
        storage.set('selectedGoal', selectedGoal);
        
        updateGoalDisplay();
        updateDashboard();
        
        showNotification(`Goal updated to ${selectedGoal}!`, 'success');
      }

      function updateGoalDisplay() {
        const goalRank = ranks.find(r => r.name === selectedGoal);
        if (!goalRank) return;

        const iconEl = document.getElementById('goalIcon');
        const nameEl = document.getElementById('goalName');
        const pointsEl = document.getElementById('goalPoints');

        iconEl.textContent = goalRank.icon;
        iconEl.className = `goal-rank-icon rank-${goalRank.tier}`;
        nameEl.textContent = goalRank.name;
        pointsEl.textContent = `${goalRank.points} points`;
      }

      function updateCurrentPoints(newPoints) {
        if (isUpdating) return;
        isUpdating = true;

        const oldPoints = currentPoints;
        const goalRank = ranks.find(r => r.name === selectedGoal);
        const maxPoints = goalRank ? goalRank.points : 5325;
        
        newPoints = Math.max(0, Math.min(maxPoints, newPoints));
        currentPoints = newPoints;
        
        storage.set('currentPoints', currentPoints);

        // Check for rank achievements
        checkMilestones(oldPoints, newPoints);

        updateDashboard();
        renderRankLadder();
        
        isUpdating = false;
      }

      function calculateDaysRemaining() {
        const today = new Date();
        const seasonEnd = new Date(SEASON_END_DATE);
        const diffTime = seasonEnd - today;
        daysRemaining = Math.max(0, Math.ceil(diffTime / (1000 * 60 * 60 * 24)));
        return daysRemaining;
      }

      function updateDashboard() {
        const goalRank = ranks.find(r => r.name === selectedGoal);
        const goalPoints = goalRank ? goalRank.points : 5325;
        const pointsNeeded = Math.max(0, goalPoints - currentPoints);
        const pointsPerDay = daysRemaining > 0 ? Math.ceil(pointsNeeded / daysRemaining) : 0;
        const completion = ((currentPoints / goalPoints) * 100).toFixed(1);

        // Update stats with animation
        animateValue('daysRemaining', daysRemaining);
        animateValue('pointsPerDay', pointsPerDay);
        animateValue('completion', completion + '%');

        // Update progress bar
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const progressTitle = document.getElementById('progressTitle');
        
        progressBar.style.width = `${Math.min(100, (currentPoints / goalPoints) * 100)}%`;
        progressText.textContent = `${currentPoints} / ${goalPoints}`;
        progressTitle.textContent = `Progress to ${selectedGoal}`;

        // Check if goal achieved
        if (currentPoints >= goalPoints) {
          progressBar.parentElement.parentElement.classList.add('celebration-mode');
          document.getElementById('paceIndicator').textContent = `🎉 ${selectedGoal} Achieved! Congratulations!`;
          document.getElementById('paceIndicator').className = 'pace-indicator ahead';
        } else {
          progressBar.parentElement.parentElement.classList.remove('celebration-mode');
          updatePaceIndicator();
        }

        // Update next rank
        updateNextRank();

        // Update goal breakdown
        renderGoalBreakdown(pointsPerDay);
      }

      function updatePaceIndicator() {
        const goalRank = ranks.find(r => r.name === selectedGoal);
        const goalPoints = goalRank ? goalRank.points : 5325;
        
        const seasonStart = new Date(SEASON_START_DATE);
        const today = new Date();
        const seasonEnd = new Date(SEASON_END_DATE);
        
        const totalDays = Math.ceil((seasonEnd - seasonStart) / (1000 * 60 * 60 * 24));
        const daysElapsed = Math.ceil((today - seasonStart) / (1000 * 60 * 60 * 24));
        
        const expectedProgress = (daysElapsed / totalDays) * goalPoints;
        const actualProgress = currentPoints;
        const difference = actualProgress - expectedProgress;
        
        const indicator = document.getElementById('paceIndicator');
        
        if (Math.abs(difference) < 50) {
          indicator.textContent = '✅ On track to reach goal';
          indicator.className = 'pace-indicator on-track';
        } else if (difference > 0) {
          const daysAhead = Math.floor(difference / (goalPoints / totalDays));
          indicator.textContent = `🚀 ${daysAhead} days ahead of schedule`;
          indicator.className = 'pace-indicator ahead';
        } else {
          const catchUpPoints = Math.ceil(-difference / daysRemaining);
          indicator.textContent = `⚠️ Behind schedule - need ${catchUpPoints} extra points/day to catch up`;
          indicator.className = 'pace-indicator behind';
        }
      }

      function updateNextRank() {
        let nextRank = null;
        for (const rank of ranks) {
          if (rank.points > currentPoints) {
            nextRank = rank;
            break;
          }
        }

        const pointsEl = document.querySelector('.next-rank-points');
        const nameEl = document.querySelector('.next-rank-name');
        
        if (nextRank) {
          pointsEl.textContent = nextRank.points - currentPoints;
          nameEl.textContent = nextRank.name;
        } else {
          pointsEl.textContent = '0';
          nameEl.textContent = 'Max Rank!';
        }
      }

      function renderGoalBreakdown(dailyPoints) {
        const breakdown = document.getElementById('goalBreakdown');
        
        if (dailyPoints <= 0) {
          breakdown.innerHTML = '<div style="color: #50c878; font-size: 0.9em;">Goal achieved!</div>';
          return;
        }

        // Calculate realistic scenarios with Season 8 points
        const scenarios = [
          { wins: Math.ceil(dailyPoints / 21), type: 'wins' },
          { seconds: Math.ceil(dailyPoints / 12), type: 'seconds' },
          { thirds: Math.ceil(dailyPoints / 8), type: 'thirds' },
          { qualified: Math.ceil(dailyPoints / 5), type: 'qualified' }
        ];

        let html = '<div style="font-size: 0.8em; margin-top: 10px; color: #b0b0b0;">Daily options:</div>';
        html += '<div style="display: grid; gap: 5px; margin-top: 5px;">';
        
        scenarios.forEach(scenario => {
          if (scenario[Object.keys(scenario)[0]] <= 10) {
            const label = scenario.type === 'wins' ? '🏆 Wins' :
                         scenario.type === 'seconds' ? '🥈 2nd' :
                         scenario.type === 'thirds' ? '🥉 3rd' :
                         '✅ Qualified';
            html += `<div style="font-size: 0.9em;">${scenario[Object.keys(scenario)[0]]} ${label}</div>`;
          }
        });
        
        html += '</div>';
        breakdown.innerHTML = html;
      }

      function renderRankLadder() {
        const ladder = document.getElementById('rankLadder');
        const fragment = document.createDocumentFragment();
        
        // Use requestAnimationFrame for smooth rendering
        requestAnimationFrame(() => {
          ladder.innerHTML = '';
          
          ranks.forEach((rank, index) => {
            const isCompleted = currentPoints >= rank.points;
            const isCurrent = !isCompleted && (index === 0 || currentPoints >= ranks[index - 1].points);
            
            const rankItem = document.createElement('div');
            rankItem.className = `rank-item ${isCompleted ? 'completed' : ''} ${isCurrent ? 'current' : ''}`;
            rankItem.style.animationDelay = `${index * 0.02}s`;
            
            const icon = document.createElement('div');
            icon.className = `rank-icon rank-${rank.tier}`;
            icon.textContent = rank.icon;
            
            const name = document.createElement('div');
            name.innerHTML = `<strong>${rank.name}</strong>`;
            
            const points = document.createElement('div');
            points.textContent = `${rank.points} pts`;
            
            const gap = document.createElement('div');
            if (!isCompleted) {
              gap.textContent = `+${rank.points - currentPoints}`;
              gap.style.color = '#888';
            } else {
              gap.textContent = '✓';
              gap.style.color = '#50c878';
            }
            
            rankItem.appendChild(icon);
            rankItem.appendChild(name);
            rankItem.appendChild(points);
            rankItem.appendChild(gap);
            
            fragment.appendChild(rankItem);
          });
          
          ladder.appendChild(fragment);
        });
      }

      function quickAddPoints(points) {
        const oldPoints = currentPoints;
        
        // Add to undo history (max 5 items)
        undoHistory.push({
          points: points,
          timestamp: Date.now(),
          oldTotal: oldPoints
        });
        
        if (undoHistory.length > 5) {
          undoHistory.shift();
        }
        
        storage.set('undoHistory', undoHistory);
        updateUndoButton();
        
        updateCurrentPoints(currentPoints + points);
        
        // Add to daily entries
        const today = new Date().toISOString().split('T')[0];
        const existingEntry = dailyEntries.find(e => e.date === today);
        
        if (existingEntry) {
          existingEntry.points += points;
          existingEntry.total = currentPoints;
        } else {
          dailyEntries.push({
            date: today,
            points: points,
            total: currentPoints,
            notes: `Quick add: +${points}`
          });
        }
        
        storage.set('dailyEntries', dailyEntries);
        renderDailyEntries();
        
        showNotification(`+${points} points added! Total: ${currentPoints}`, 'success');
      }

      function undoLastAdd() {
        if (undoHistory.length === 0) {
          showNotification('No actions to undo', 'error');
          return;
        }
        
        const lastAction = undoHistory.pop();
        storage.set('undoHistory', undoHistory);
        
        updateCurrentPoints(lastAction.oldTotal);
        updateUndoButton();
        
        // Remove from daily entries if it was today
        const today = new Date().toISOString().split('T')[0];
        const todayEntry = dailyEntries.find(e => e.date === today);
        if (todayEntry) {
          todayEntry.points -= lastAction.points;
          if (todayEntry.points <= 0) {
            dailyEntries = dailyEntries.filter(e => e.date !== today);
          }
        }
        
        storage.set('dailyEntries', dailyEntries);
        renderDailyEntries();
        
        showNotification(`Undid +${lastAction.points} points`, 'success');
      }

      function updateUndoButton() {
        const button = document.getElementById('undoButton');
        const pointsSpan = document.getElementById('undoPoints');
        
        if (undoHistory.length > 0) {
          const lastAction = undoHistory[undoHistory.length - 1];
          pointsSpan.textContent = `-${lastAction.points}`;
          button.style.opacity = '1';
        } else {
          pointsSpan.textContent = '-0';
          button.style.opacity = '0.5';
        }
      }

      function addDailyEntry() {
        const date = document.getElementById('dateInput').value;
        const points = parseInt(document.getElementById('pointsInput').value) || 0;
        const notes = document.getElementById('notesInput').value.trim();
        
        if (!date || points === 0) {
          showNotification('Please enter date and points', 'error');
          return;
        }
        
        const existingIndex = dailyEntries.findIndex(e => e.date === date);
        
        if (existingIndex >= 0) {
          dailyEntries[existingIndex].points += points;
          dailyEntries[existingIndex].total = currentPoints + points;
          if (notes) {
            dailyEntries[existingIndex].notes = notes;
          }
        } else {
          dailyEntries.push({
            date: date,
            points: points,
            total: currentPoints + points,
            notes: notes
          });
        }
        
        // Sort by date
        dailyEntries.sort((a, b) => new Date(a.date) - new Date(b.date));
        
        storage.set('dailyEntries', dailyEntries);
        updateCurrentPoints(currentPoints + points);
        
        // Clear form
        document.getElementById('pointsInput').value = '';
        document.getElementById('notesInput').value = '';
        
        renderDailyEntries();
        showNotification(`Entry added: +${points} points`, 'success');
      }

      function renderDailyEntries() {
        const list = document.getElementById('entriesList');
        list.innerHTML = '';
        
        if (dailyEntries.length === 0) {
          list.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No entries yet. Start tracking your progress!</div>';
          return;
        }
        
        // Show last 10 entries
        const recent = dailyEntries.slice(-10).reverse();
        
        recent.forEach(entry => {
          const item = document.createElement('div');
          item.className = 'entry-item';
          
          const dateEl = document.createElement('div');
          dateEl.textContent = new Date(entry.date).toLocaleDateString();
          
          const pointsEl = document.createElement('div');
          pointsEl.className = 'entry-points';
          pointsEl.textContent = `+${entry.points}`;
          
          const notesEl = document.createElement('div');
          notesEl.textContent = entry.notes || '';
          notesEl.style.color = '#888';
          
          const totalEl = document.createElement('div');
          totalEl.textContent = `Total: ${entry.total}`;
          totalEl.style.textAlign = 'right';
          
          item.appendChild(dateEl);
          item.appendChild(pointsEl);
          item.appendChild(notesEl);
          item.appendChild(totalEl);
          
          list.appendChild(item);
        });
      }

      function checkMilestones(oldPoints, newPoints) {
        for (const rank of ranks) {
          if (oldPoints < rank.points && newPoints >= rank.points) {
            showMilestonePopup(rank);
            createConfetti();
            break;
          }
        }
      }

      function showMilestonePopup(rank) {
        const popup = document.createElement('div');
        popup.className = 'milestone-popup';
        
        let message = 'Keep climbing!';
        if (rank.tier === 'bronze') message = 'Bronze achieved! The journey begins!';
        else if (rank.tier === 'silver') message = 'Silver status! Rising through the ranks!';
        else if (rank.tier === 'gold') message = 'Golden player! Impressive progress!';
        else if (rank.tier === 'platinum') message = 'Platinum prestige! Elite territory!';
        else if (rank.tier === 'diamond') message = 'Diamond hands! Near the top!';
        else if (rank.tier === 'ruby') message = 'Ruby rare! Among the best!';
        else if (rank.tier === 'emerald') message = 'EMERALD LEGEND! You\'ve made it!';
        
        popup.innerHTML = `
          <div class="milestone-icon">${rank.icon}</div>
          <div class="milestone-title">${rank.name} Unlocked!</div>
          <div class="milestone-message">${message}</div>
          <div style="font-size: 0.9em; opacity: 0.8; margin-bottom: 15px;">
            ${rank.points} points achieved
          </div>
          <button class="milestone-close" onclick="this.parentElement.remove()">Continue</button>
        `;
        
        document.body.appendChild(popup);
        
        setTimeout(() => {
          popup.remove();
        }, 5000);
      }

      function createConfetti() {
        for (let i = 0; i < 50; i++) {
          setTimeout(() => {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.backgroundColor = ['#50c878', '#20b2aa', '#ffd700', '#ff6b6b', '#4ecdc4'][Math.floor(Math.random() * 5)];
            confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
            document.body.appendChild(confetti);
            
            setTimeout(() => confetti.remove(), 3000);
          }, i * 30);
        }
      }

      function showNotification(message, type = 'success') {
        const notification = document.getElementById('notification');
        notification.textContent = message;
        notification.className = `notification ${type} show`;
        
        setTimeout(() => {
          notification.classList.remove('show');
        }, 3000);
      }

      function animateValue(elementId, value) {
        const element = document.getElementById(elementId);
        if (!element) return;
        
        const current = element.textContent;
        const isPercentage = typeof value === 'string' && value.includes('%');
        const numericValue = parseFloat(value) || 0;
        const currentNumeric = parseFloat(current) || 0;
        
        if (Math.abs(numericValue - currentNumeric) < 0.1) {
          element.textContent = value;
          return;
        }
        
        const duration = 500;
        const steps = 20;
        const increment = (numericValue - currentNumeric) / steps;
        let step = 0;
        
        const timer = setInterval(() => {
          step++;
          const newValue = currentNumeric + (increment * step);
          
          if (step >= steps) {
            element.textContent = value;
            clearInterval(timer);
          } else {
            element.textContent = isPercentage ? newValue.toFixed(1) + '%' : Math.round(newValue);
          }
        }, duration / steps);
      }

      // Nav functions
      function shareProgress() {
        const goalRank = ranks.find(r => r.name === selectedGoal);
        const goalPoints = goalRank ? goalRank.points : 5325;
        const progress = ((currentPoints / goalPoints) * 100).toFixed(1);
        
        const text = `🎮 THE FINALS Season 8 Progress\n` +
                    `📊 ${currentPoints}/${goalPoints} points (${progress}%)\n` +
                    `🎯 Goal: ${selectedGoal}\n` +
                    `📅 ${daysRemaining} days remaining\n` +
                    `🔗 Track yours at: thefinalsloadout.com/wt-progress`;
        
        if (navigator.share) {
          navigator.share({
            title: 'My World Tour Progress',
            text: text
          });
        } else {
          navigator.clipboard.writeText(text);
          showNotification('Progress copied to clipboard!', 'success');
        }
      }

      function takeScreenshot() {
        document.body.classList.add('screenshot-mode');
        
        setTimeout(() => {
          showNotification('Screenshot ready! Use your device\'s screenshot feature.', 'success');
          
          setTimeout(() => {
            document.body.classList.remove('screenshot-mode');
          }, 3000);
        }, 100);
      }

      function resetData() {
        if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
          storage.clearStorage();
          location.reload();
        }
      }

      // Auto-save on visibility change
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
          // Save current state
          storage.set('currentPoints', currentPoints);
          storage.set('selectedGoal', selectedGoal);
          storage.set('dailyEntries', dailyEntries);
          storage.set('undoHistory', undoHistory);
        }
      });

      // Update timer
      setInterval(() => {
        calculateDaysRemaining();
        const daysEl = document.getElementById('daysRemaining');
        if (daysEl && parseInt(daysEl.textContent) !== daysRemaining) {
          updateDashboard();
        }
      }, 60000); // Update every minute
    </script>
  </body>
</html>
